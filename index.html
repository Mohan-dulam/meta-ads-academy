<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Meta Ads Performance Marketing Academy</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;1,9..40,300&display=swap" rel="stylesheet">
<style>
/* ===== CSS VARIABLES ===== */
:root {
  --bg: #0a0b0f;
  --bg2: #111318;
  --bg3: #181b22;
  --border: #1e2230;
  --accent: #4f6ef7;
  --accent2: #7c3aed;
  --accent3: #06d6a0;
  --text: #e8eaf0;
  --text2: #8b90a7;
  --text3: #5a5f75;
  --sidebar-w: 280px;
  --header-h: 60px;
  --radius: 10px;
  --shadow: 0 4px 24px rgba(0,0,0,0.4);
}

/* ===== RESET ===== */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }
body {
  font-family: 'DM Sans', sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.7;
  font-size: 15px;
  overflow-x: hidden;
}

/* ===== SCROLLBAR ===== */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: var(--bg); }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

/* ===== LAYOUT ===== */
#app { display: flex; min-height: 100vh; }

/* ===== HEADER ===== */
#header {
  position: fixed;
  top: 0; left: 0; right: 0;
  height: var(--header-h);
  background: rgba(10,11,15,0.95);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  padding: 0 20px;
  gap: 16px;
  z-index: 1000;
}

.logo {
  font-family: 'Syne', sans-serif;
  font-weight: 800;
  font-size: 17px;
  color: var(--text);
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 10px;
}
.logo-icon {
  width: 32px; height: 32px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-size: 16px;
}
.logo span { color: var(--accent); }

#search-bar {
  flex: 1;
  max-width: 400px;
  position: relative;
  margin-left: auto;
}
#search-input {
  width: 100%;
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: var(--text);
  padding: 8px 16px 8px 38px;
  font-family: 'DM Sans', sans-serif;
  font-size: 13px;
  outline: none;
  transition: border-color 0.2s;
}
#search-input:focus { border-color: var(--accent); }
#search-input::placeholder { color: var(--text3); }
.search-icon {
  position: absolute; left: 12px; top: 50%; transform: translateY(-50%);
  color: var(--text3); font-size: 14px;
}
#search-results {
  position: absolute;
  top: calc(100% + 6px);
  left: 0; right: 0;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  display: none;
  z-index: 2000;
  max-height: 300px;
  overflow-y: auto;
}
.search-result-item {
  padding: 10px 16px;
  cursor: pointer;
  font-size: 13px;
  border-bottom: 1px solid var(--border);
  transition: background 0.15s;
}
.search-result-item:hover { background: var(--bg3); }
.search-result-item strong { color: var(--accent); font-size: 11px; text-transform: uppercase; letter-spacing: 0.05em; display: block; margin-bottom: 2px; }

#menu-btn {
  display: none;
  background: none; border: none; color: var(--text);
  font-size: 22px; cursor: pointer; padding: 4px;
  margin-left: 8px;
}

/* ===== SIDEBAR ===== */
#sidebar {
  width: var(--sidebar-w);
  position: fixed;
  top: var(--header-h);
  left: 0;
  bottom: 0;
  background: var(--bg2);
  border-right: 1px solid var(--border);
  overflow-y: auto;
  z-index: 900;
  padding: 16px 0 40px;
  transition: transform 0.3s;
}

.nav-section-label {
  font-family: 'Syne', sans-serif;
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--text3);
  padding: 16px 20px 6px;
}

.nav-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 9px 20px;
  cursor: pointer;
  font-size: 13.5px;
  color: var(--text2);
  transition: all 0.15s;
  border-left: 3px solid transparent;
  font-weight: 400;
}
.nav-item:hover { color: var(--text); background: rgba(79,110,247,0.07); }
.nav-item.active {
  color: var(--accent);
  background: rgba(79,110,247,0.1);
  border-left-color: var(--accent);
  font-weight: 500;
}
.nav-item .nav-icon { font-size: 15px; width: 20px; text-align: center; }

/* ===== MAIN CONTENT ===== */
#main {
  margin-left: var(--sidebar-w);
  margin-top: var(--header-h);
  flex: 1;
  min-height: calc(100vh - var(--header-h));
  padding: 40px 48px;
  max-width: 900px;
}

/* ===== PAGE SECTIONS ===== */
.page { display: none; }
.page.active { display: block; animation: fadeIn 0.25s ease; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

/* ===== TYPOGRAPHY ===== */
h1 {
  font-family: 'Syne', sans-serif;
  font-size: 36px;
  font-weight: 800;
  color: var(--text);
  line-height: 1.2;
  margin-bottom: 12px;
}
h1 .highlight { color: var(--accent); }

.page-subtitle {
  color: var(--text2);
  font-size: 16px;
  margin-bottom: 36px;
  max-width: 600px;
}

h2 {
  font-family: 'Syne', sans-serif;
  font-size: 22px;
  font-weight: 700;
  color: var(--text);
  margin: 40px 0 14px;
  padding-bottom: 8px;
  border-bottom: 1px solid var(--border);
}
h3 {
  font-family: 'Syne', sans-serif;
  font-size: 17px;
  font-weight: 600;
  color: var(--text);
  margin: 24px 0 10px;
}
h4 { font-size: 15px; color: var(--accent); margin: 16px 0 8px; font-weight: 600; }
p { color: var(--text2); margin-bottom: 14px; }
strong { color: var(--text); font-weight: 600; }
em { color: var(--accent3); font-style: normal; }

/* ===== COMPONENTS ===== */
.card {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 24px;
  margin-bottom: 20px;
}
.card-accent { border-left: 3px solid var(--accent); }
.card-green { border-left: 3px solid var(--accent3); }
.card-purple { border-left: 3px solid var(--accent2); }
.card-orange { border-left: 3px solid #f59e0b; }
.card-red { border-left: 3px solid #ef4444; }

.tag {
  display: inline-block;
  padding: 3px 10px;
  border-radius: 20px;
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  margin-right: 6px; margin-bottom: 6px;
}
.tag-blue { background: rgba(79,110,247,0.15); color: var(--accent); }
.tag-green { background: rgba(6,214,160,0.15); color: var(--accent3); }
.tag-purple { background: rgba(124,58,237,0.15); color: #a78bfa; }
.tag-orange { background: rgba(245,158,11,0.15); color: #f59e0b; }
.tag-red { background: rgba(239,68,68,0.15); color: #ef4444; }

.info-box {
  background: rgba(79,110,247,0.08);
  border: 1px solid rgba(79,110,247,0.25);
  border-radius: var(--radius);
  padding: 16px 20px;
  margin: 16px 0;
  color: var(--text2);
  font-size: 14px;
}
.info-box::before { content: "üí° "; }

.warning-box {
  background: rgba(245,158,11,0.08);
  border: 1px solid rgba(245,158,11,0.25);
  border-radius: var(--radius);
  padding: 16px 20px;
  margin: 16px 0;
  color: var(--text2);
  font-size: 14px;
}
.warning-box::before { content: "‚ö†Ô∏è "; }

.success-box {
  background: rgba(6,214,160,0.08);
  border: 1px solid rgba(6,214,160,0.25);
  border-radius: var(--radius);
  padding: 16px 20px;
  margin: 16px 0;
  color: var(--text2);
  font-size: 14px;
}
.success-box::before { content: "‚úÖ "; }

.step-list { counter-reset: steps; list-style: none; margin: 16px 0; }
.step-list li {
  counter-increment: steps;
  display: flex;
  gap: 14px;
  margin-bottom: 14px;
  color: var(--text2);
  font-size: 14px;
  align-items: flex-start;
}
.step-list li::before {
  content: counter(steps);
  min-width: 28px; height: 28px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 12px; font-weight: 700; color: #fff;
  flex-shrink: 0;
}

.bullet-list { list-style: none; margin: 12px 0; }
.bullet-list li {
  color: var(--text2);
  font-size: 14px;
  padding: 4px 0 4px 22px;
  position: relative;
}
.bullet-list li::before {
  content: "‚Üí";
  position: absolute; left: 0;
  color: var(--accent);
  font-weight: 700;
}

.kpi-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 16px;
  margin: 20px 0;
}
.kpi-card {
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
  text-align: center;
}
.kpi-card .kpi-label { font-size: 11px; color: var(--text3); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 8px; }
.kpi-card .kpi-val { font-family: 'Syne', sans-serif; font-size: 28px; font-weight: 800; color: var(--accent); }
.kpi-card .kpi-desc { font-size: 12px; color: var(--text3); margin-top: 6px; }

.table-wrap { overflow-x: auto; margin: 20px 0; }
table { width: 100%; border-collapse: collapse; font-size: 13.5px; }
th {
  background: var(--bg3);
  padding: 10px 14px;
  text-align: left;
  color: var(--text2);
  font-weight: 600;
  border-bottom: 1px solid var(--border);
  font-family: 'Syne', sans-serif;
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}
td {
  padding: 10px 14px;
  border-bottom: 1px solid var(--border);
  color: var(--text2);
  vertical-align: top;
}
tr:last-child td { border-bottom: none; }

.code-block {
  background: #0d0f14;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
  font-family: 'Courier New', monospace;
  font-size: 13px;
  color: #a8d8a8;
  overflow-x: auto;
  margin: 16px 0;
  line-height: 1.6;
  white-space: pre;
}
.code-block .comment { color: #5a6070; }
.code-block .keyword { color: #79b8ff; }
.code-block .string { color: #f0c674; }
.code-block .func { color: #b392f0; }

.two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
.three-col { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; margin: 20px 0; }

.badge { display: inline-flex; align-items: center; gap: 6px; }

/* Hero */
.hero {
  background: linear-gradient(135deg, rgba(79,110,247,0.1) 0%, rgba(124,58,237,0.1) 100%);
  border: 1px solid rgba(79,110,247,0.2);
  border-radius: 16px;
  padding: 40px;
  margin-bottom: 36px;
  position: relative;
  overflow: hidden;
}
.hero::before {
  content: '';
  position: absolute;
  top: -50%; right: -10%;
  width: 300px; height: 300px;
  background: radial-gradient(circle, rgba(79,110,247,0.15), transparent 60%);
  pointer-events: none;
}
.hero h1 { font-size: 42px; margin-bottom: 16px; }
.hero p { font-size: 17px; max-width: 520px; }

.cta-row { display: flex; gap: 12px; margin-top: 24px; flex-wrap: wrap; }
.btn {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 11px 22px;
  border-radius: 8px;
  font-family: 'Syne', sans-serif;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  border: none;
  transition: all 0.2s;
  text-decoration: none;
}
.btn-primary {
  background: var(--accent);
  color: #fff;
}
.btn-primary:hover { background: #3d5ce5; transform: translateY(-1px); }
.btn-secondary {
  background: transparent;
  color: var(--text);
  border: 1px solid var(--border);
}
.btn-secondary:hover { border-color: var(--accent); color: var(--accent); }

.progress-track {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
  margin: 24px 0;
}
.progress-card {
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
  cursor: pointer;
  transition: border-color 0.2s;
}
.progress-card:hover { border-color: var(--accent); }
.progress-card .pc-level {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--text3);
  margin-bottom: 8px;
  font-weight: 600;
}
.progress-card h3 { font-size: 15px; margin: 0 0 8px; }
.progress-card p { font-size: 12px; color: var(--text3); margin: 0; }
.progress-card .pc-icon { font-size: 28px; margin-bottom: 12px; }

/* Diagnosis cards */
.diagnosis-card {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  margin-bottom: 20px;
  overflow: hidden;
}
.diagnosis-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px 20px;
  cursor: pointer;
  background: var(--bg3);
  transition: background 0.15s;
}
.diagnosis-header:hover { background: rgba(79,110,247,0.08); }
.diagnosis-title { font-family: 'Syne', sans-serif; font-size: 15px; font-weight: 700; color: var(--text); }
.diagnosis-body { padding: 20px; display: none; }
.diagnosis-body.open { display: block; }
.diag-icon { font-size: 22px; }

/* CHATBOT */
#chatbot-toggle {
  position: fixed;
  bottom: 28px; right: 28px;
  width: 56px; height: 56px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  border-radius: 50%;
  border: none;
  cursor: pointer;
  font-size: 22px;
  box-shadow: 0 4px 20px rgba(79,110,247,0.5);
  z-index: 2000;
  transition: transform 0.2s, box-shadow 0.2s;
  display: flex; align-items: center; justify-content: center;
}
#chatbot-toggle:hover { transform: scale(1.08); box-shadow: 0 6px 28px rgba(79,110,247,0.6); }

#chatbot {
  position: fixed;
  bottom: 96px; right: 28px;
  width: 340px;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: var(--shadow);
  z-index: 2000;
  display: none;
  flex-direction: column;
  overflow: hidden;
  max-height: 480px;
}
#chatbot.open { display: flex; animation: popIn 0.2s ease; }
@keyframes popIn { from { opacity: 0; transform: scale(0.92) translateY(10px); } to { opacity: 1; transform: scale(1) translateY(0); } }

.chat-header {
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  padding: 14px 18px;
  display: flex; align-items: center; justify-content: space-between;
}
.chat-header-title { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 14px; color: #fff; }
.chat-close { background: none; border: none; color: rgba(255,255,255,0.8); cursor: pointer; font-size: 18px; }

#chat-messages {
  flex: 1;
  overflow-y: auto;
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-height: 200px;
}
.chat-msg {
  max-width: 88%;
  padding: 10px 14px;
  border-radius: 12px;
  font-size: 13px;
  line-height: 1.5;
}
.chat-msg.bot {
  background: var(--bg3);
  color: var(--text2);
  align-self: flex-start;
  border-bottom-left-radius: 4px;
}
.chat-msg.user {
  background: var(--accent);
  color: #fff;
  align-self: flex-end;
  border-bottom-right-radius: 4px;
}

.chat-suggestions {
  padding: 8px 16px 4px;
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}
.chat-sug {
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 5px 11px;
  font-size: 11px;
  color: var(--text2);
  cursor: pointer;
  transition: all 0.15s;
}
.chat-sug:hover { border-color: var(--accent); color: var(--accent); }

.chat-input-row {
  display: flex;
  gap: 8px;
  padding: 12px 16px;
  border-top: 1px solid var(--border);
}
#chat-input {
  flex: 1;
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 8px 12px;
  font-family: 'DM Sans', sans-serif;
  font-size: 13px;
  color: var(--text);
  outline: none;
}
#chat-input:focus { border-color: var(--accent); }
#chat-send {
  background: var(--accent);
  border: none;
  border-radius: 8px;
  width: 36px; height: 36px;
  cursor: pointer;
  font-size: 16px;
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
  transition: background 0.15s;
}
#chat-send:hover { background: #3d5ce5; }

/* Typing indicator */
.typing-dots { display: inline-flex; gap: 4px; align-items: center; padding: 2px 0; }
.typing-dots span {
  width: 7px; height: 7px;
  background: var(--text3);
  border-radius: 50%;
  animation: typingBounce 1.2s infinite ease-in-out;
}
.typing-dots span:nth-child(2) { animation-delay: 0.2s; }
.typing-dots span:nth-child(3) { animation-delay: 0.4s; }
@keyframes typingBounce {
  0%, 60%, 100% { transform: translateY(0); opacity: 0.4; }
  30% { transform: translateY(-6px); opacity: 1; }
}

/* ===== RESPONSIVE ===== */
@media (max-width: 900px) {
  #sidebar { transform: translateX(-100%); }
  #sidebar.open { transform: translateX(0); }
  #main { margin-left: 0; padding: 24px 20px; }
  #menu-btn { display: block; }
  .hero h1 { font-size: 28px; }
  .two-col, .three-col, .progress-track { grid-template-columns: 1fr; }
  .kpi-grid { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 500px) {
  #main { padding: 16px; }
  h1 { font-size: 26px; }
}
</style>
</head>
<body>

<!-- HEADER -->
<div id="header">
  <button id="menu-btn" onclick="toggleSidebar()">‚ò∞</button>
  <div class="logo">
    <div class="logo-icon">üì°</div>
    <div>Meta Ads <span>Academy</span></div>
  </div>
  <div id="search-bar">
    <span class="search-icon">üîç</span>
    <input type="text" id="search-input" placeholder="Search topics‚Ä¶" oninput="handleSearch(this.value)" onblur="setTimeout(()=>document.getElementById('search-results').style.display='none',200)">
    <div id="search-results"></div>
  </div>
</div>

<!-- SIDEBAR -->
<nav id="sidebar">
  <div class="nav-section-label">Navigation</div>
  <div class="nav-item active" onclick="showPage('home')" data-page="home"><span class="nav-icon">üè†</span> Home</div>
  <div class="nav-item" onclick="showPage('start')" data-page="start"><span class="nav-icon">üöÄ</span> Start Here</div>

  <div class="nav-section-label">Foundation</div>
  <div class="nav-item" onclick="showPage('basics')" data-page="basics"><span class="nav-icon">üìñ</span> Meta Ads Basics</div>
  <div class="nav-item" onclick="showPage('campaign')" data-page="campaign"><span class="nav-icon">‚öôÔ∏è</span> Campaign Creation</div>
  <div class="nav-item" onclick="showPage('audience')" data-page="audience"><span class="nav-icon">üéØ</span> Audience Targeting</div>
  <div class="nav-item" onclick="showPage('creatives')" data-page="creatives"><span class="nav-icon">üé®</span> Creatives & Ad Copy</div>

  <div class="nav-section-label">Optimization</div>
  <div class="nav-item" onclick="showPage('optimization')" data-page="optimization"><span class="nav-icon">üìà</span> Optimization & Metrics</div>
  <div class="nav-item" onclick="showPage('scaling')" data-page="scaling"><span class="nav-icon">üìä</span> Scaling Strategies</div>
  <div class="nav-item" onclick="showPage('retargeting')" data-page="retargeting"><span class="nav-icon">üîÑ</span> Retargeting Strategies</div>

  <div class="nav-section-label">Tracking</div>
  <div class="nav-item" onclick="showPage('tracking')" data-page="tracking"><span class="nav-icon">üîç</span> Tracking & Analytics</div>
  <div class="nav-item" onclick="showPage('gtm')" data-page="gtm"><span class="nav-icon">üè∑Ô∏è</span> GTM Full Guide</div>
  <div class="nav-item" onclick="showPage('ga4')" data-page="ga4"><span class="nav-icon">üìâ</span> GA4 Full Guide</div>
  <div class="nav-item" onclick="showPage('capi')" data-page="capi"><span class="nav-icon">üîå</span> Conversion API</div>

  <div class="nav-section-label">Advanced</div>
  <div class="nav-item" onclick="showPage('advanced')" data-page="advanced"><span class="nav-icon">‚ö°</span> Advanced Meta Ads</div>
  <div class="nav-item" onclick="showPage('troubleshooting')" data-page="troubleshooting"><span class="nav-icon">üõ†Ô∏è</span> Troubleshooting Center</div>
  <div class="nav-item" onclick="showPage('scenarios')" data-page="scenarios"><span class="nav-icon">üé¨</span> Real World Scenarios</div>

  <div class="nav-section-label">Info</div>
  <div class="nav-item" onclick="showPage('resources')" data-page="resources"><span class="nav-icon">üìö</span> Resources</div>
  <div class="nav-item" onclick="showPage('about')" data-page="about"><span class="nav-icon">‚ÑπÔ∏è</span> About</div>
</nav>

<!-- MAIN -->
<main id="main">

<!-- ===== HOME ===== -->
<div class="page active" id="page-home">
  <div class="hero">
    <h1>Master <span class="highlight">Meta Ads</span><br>From Zero to Pro</h1>
    <p class="page-subtitle">A complete performance marketing academy. Learn Facebook & Instagram advertising ‚Äî beginner to advanced ‚Äî with real strategy, real numbers, and zero fluff.</p>
    <div class="cta-row">
      <button class="btn btn-primary" onclick="showPage('start')">üöÄ Start Learning ‚Üí</button>
      <button class="btn btn-secondary" onclick="showPage('troubleshooting')">üõ†Ô∏è Troubleshooting Center</button>
    </div>
  </div>

  <h2>What You'll Learn</h2>
  <div class="progress-track">
    <div class="progress-card" onclick="showPage('basics')">
      <div class="pc-icon">üå±</div>
      <div class="pc-level">Beginner</div>
      <h3>Foundation</h3>
      <p>Ads Manager, campaign structure, objectives, budgets ‚Äî all from scratch.</p>
    </div>
    <div class="progress-card" onclick="showPage('optimization')">
      <div class="pc-icon">üìà</div>
      <div class="pc-level">Intermediate</div>
      <h3>Optimization</h3>
      <p>CPM, CTR, ROAS, CPA ‚Äî read the numbers and take exact action.</p>
    </div>
    <div class="progress-card" onclick="showPage('advanced')">
      <div class="pc-icon">‚ö°</div>
      <div class="pc-level">Advanced</div>
      <h3>Scaling & Strategy</h3>
      <p>Scaling systems, creative frameworks, advanced audiences & automation.</p>
    </div>
  </div>

  <h2>Academy Topics</h2>
  <div class="two-col">
    <div class="card card-accent">
      <h3>üì° Meta Ads Fundamentals</h3>
      <p>Campaign structure, ad auction, learning phase, placements, and delivery system explained in plain language.</p>
    </div>
    <div class="card card-green">
      <h3>üéØ Audience Targeting</h3>
      <p>Interest targeting, Lookalike Audiences, broad targeting, retargeting windows, and frequency management.</p>
    </div>
    <div class="card card-purple">
      <h3>üé® Creative Strategy</h3>
      <p>Ad psychology, hooks, video structure, UGC ads, creative testing frameworks, and copy formulas.</p>
    </div>
    <div class="card card-orange">
      <h3>üîç Full Tracking Setup</h3>
      <p>Meta Pixel, GTM complete guide, GA4 setup, Conversion API ‚Äî with real working code examples.</p>
    </div>
    <div class="card card-red">
      <h3>üõ†Ô∏è Troubleshooting Center</h3>
      <p>Diagnose any problem: high CPA, creative fatigue, audience saturation, sudden drops, and more.</p>
    </div>
    <div class="card">
      <h3>üé¨ Real World Scenarios</h3>
      <p>Actual case studies and decision frameworks for e-commerce, lead generation, and SaaS.</p>
    </div>
  </div>

  <div class="info-box">This academy is structured as a learning path. Beginners should start with "Start Here," while intermediate and advanced marketers can jump directly to any section using the sidebar.</div>
</div>

<!-- ===== START HERE ===== -->
<div class="page" id="page-start">
  <h1>üöÄ <span class="highlight">Start Here</span></h1>
  <p class="page-subtitle">Your complete orientation guide to Meta advertising. Read this first, no matter your experience level.</p>

  <h2>What is Meta Advertising?</h2>
  <p><strong>Simple version:</strong> Meta Ads lets you pay to show your product or service to specific people on Facebook and Instagram.</p>
  <p><strong>Professional version:</strong> Meta's advertising platform is a real-time auction-based paid media channel that reaches 3+ billion monthly active users across Facebook, Instagram, Messenger, and the Audience Network. You define who sees your ads, how much you spend, and what action you want people to take.</p>

  <div class="info-box">Meta Ads is NOT like Google Ads. Google shows ads to people already searching for something (intent-based). Meta shows ads to people based on who they are and what they're interested in (interruption-based). This is a critical mindset shift.</div>

  <h2>The Mindset Before You Start</h2>
  <div class="card card-accent">
    <h3>You Are Running Experiments</h3>
    <p>Every campaign is a test. You're testing: audiences, creatives, offers, landing pages. The goal is to find what works, then scale it. Never treat a single campaign as the final answer.</p>
  </div>
  <div class="card card-green">
    <h3>Creative is the #1 Lever</h3>
    <p>In 2024+, the algorithm is smart enough to find your audience. Your biggest variable is your creative ‚Äî the image, video, headline, and copy. A better creative beats a better audience strategy almost every time.</p>
  </div>
  <div class="card card-purple">
    <h3>Data Takes Time</h3>
    <p>Meta's algorithm needs data to optimize. Don't judge a campaign after 24 hours. Wait for at least 50 conversions before making significant changes. Patience is a performance marketing skill.</p>
  </div>

  <h2>Your Learning Path</h2>
  <ol class="step-list">
    <li><strong>Read Meta Ads Basics</strong> ‚Äî Understand the platform architecture and how the ad auction works</li>
    <li><strong>Learn Campaign Creation</strong> ‚Äî Set up your first campaign correctly with the right objective and budget</li>
    <li><strong>Master Audience Targeting</strong> ‚Äî Learn who to target and when to go broad</li>
    <li><strong>Study Creatives & Ad Copy</strong> ‚Äî Build ads that actually stop the scroll</li>
    <li><strong>Set Up Tracking</strong> ‚Äî Install the Pixel, configure events, and verify data</li>
    <li><strong>Learn Optimization</strong> ‚Äî Read your KPIs and know exactly what to do about them</li>
    <li><strong>Scale What Works</strong> ‚Äî Use systematic scaling to grow profitably</li>
    <li><strong>Troubleshoot Problems</strong> ‚Äî Use the Troubleshooting Center as your daily diagnostic tool</li>
  </ol>

  <h2>Tools You'll Need</h2>
  <div class="table-wrap">
    <table>
      <thead><tr><th>Tool</th><th>Purpose</th><th>Cost</th></tr></thead>
      <tbody>
        <tr><td><strong>Meta Ads Manager</strong></td><td>Create and manage campaigns</td><td>Free (pay for ads)</td></tr>
        <tr><td><strong>Meta Business Suite</strong></td><td>Account and page management</td><td>Free</td></tr>
        <tr><td><strong>Meta Pixel</strong></td><td>Track website events</td><td>Free</td></tr>
        <tr><td><strong>Google Tag Manager</strong></td><td>Deploy tracking tags without code</td><td>Free</td></tr>
        <tr><td><strong>Google Analytics 4</strong></td><td>Cross-channel analytics</td><td>Free</td></tr>
        <tr><td><strong>Canva / Figma</strong></td><td>Create ad visuals</td><td>Free / Paid</td></tr>
        <tr><td><strong>Video editing tool</strong></td><td>Create video ads</td><td>Various</td></tr>
      </tbody>
    </table>
  </div>

  <h2>Account Setup Checklist</h2>
  <ol class="step-list">
    <li>Create a Meta Business Manager account at <em>business.facebook.com</em></li>
    <li>Add your Facebook Page and Instagram account to Business Manager</li>
    <li>Create an Ad Account inside Business Manager</li>
    <li>Add a payment method to your Ad Account</li>
    <li>Install the Meta Pixel on your website (see Tracking section)</li>
    <li>Verify your domain in Business Manager</li>
    <li>Configure 8 prioritized conversion events (required after iOS 14)</li>
  </ol>

  <div class="warning-box">Never run ads directly from a personal Facebook profile. Always use Business Manager. This protects your account, gives you better tools, and is required for advanced features.</div>
</div>

<!-- ===== META ADS BASICS ===== -->
<div class="page" id="page-basics">
  <h1>üìñ <span class="highlight">Meta Ads Basics</span></h1>
  <p class="page-subtitle">The complete foundation. Understand how the platform works before you touch a campaign.</p>

  <h2>The Three-Level Campaign Structure</h2>
  <p>Meta organizes everything into three levels. Understanding this is non-negotiable:</p>

  <div class="card card-accent">
    <h3>Level 1: Campaign</h3>
    <p><strong>What it is:</strong> The top-level container. Here you choose your <em>objective</em> ‚Äî what you want Meta's algorithm to optimize for.</p>
    <p><strong>Examples:</strong> Sales, Leads, Traffic, Awareness, Engagement, App Installs, Video Views</p>
    <p><strong>Rule:</strong> One campaign = one objective. Don't mix objectives.</p>
  </div>

  <div class="card card-green">
    <h3>Level 2: Ad Set</h3>
    <p><strong>What it is:</strong> Where you define WHO sees your ads, WHERE they see them, and WHEN. This is where you set your audience, placement, schedule, and budget (if using ABO).</p>
    <p><strong>Key settings:</strong> Audience, Placements, Schedule, Budget (in ABO)</p>
  </div>

  <div class="card card-purple">
    <h3>Level 3: Ad</h3>
    <p><strong>What it is:</strong> The actual creative ‚Äî the image or video, headline, copy, and call-to-action that the user sees.</p>
    <p><strong>Rule:</strong> Multiple ads per ad set = creative testing. Run 2‚Äì4 ads per ad set.</p>
  </div>

  <h2>Campaign Objectives ‚Äî When to Use Each</h2>
  <div class="table-wrap">
    <table>
      <thead><tr><th>Objective</th><th>Use When</th><th>Optimizes For</th></tr></thead>
      <tbody>
        <tr><td><strong>Sales</strong></td><td>You have purchase or lead tracking set up. E-commerce or lead gen.</td><td>Conversions (purchases, leads)</td></tr>
        <tr><td><strong>Leads</strong></td><td>Collecting leads via Instant Forms or landing page</td><td>Lead form completions</td></tr>
        <tr><td><strong>Traffic</strong></td><td>Driving website visits. Good for content or landing page testing.</td><td>Link clicks or landing page views</td></tr>
        <tr><td><strong>Engagement</strong></td><td>Growing page likes, post shares, event responses</td><td>Engagement actions</td></tr>
        <tr><td><strong>Awareness</strong></td><td>Brand building, large audiences, no direct conversion goal</td><td>Reach & frequency or brand recall</td></tr>
        <tr><td><strong>App Installs</strong></td><td>Mobile app promotion</td><td>App downloads</td></tr>
        <tr><td><strong>Video Views</strong></td><td>Building retargeting audiences via video watchers</td><td>3-sec or ThruPlay video views</td></tr>
      </tbody>
    </table>
  </div>

  <div class="warning-box">Always choose the objective that matches your actual business goal. Running a Traffic campaign to get sales is a common beginner mistake ‚Äî you're telling the algorithm to find clickers, not buyers.</div>

  <h2>The Ad Auction ‚Äî How It Really Works</h2>
  <p>Meta doesn't charge you based on time. It runs an <strong>auction every time an ad placement is available</strong>. Your ad competes against other advertisers targeting the same person.</p>
  <p>Your score in the auction is determined by:</p>
  <div class="card">
    <p><strong>Total Value = Bid √ó Estimated Action Rate √ó Ad Quality</strong></p>
    <ul class="bullet-list">
      <li><strong>Bid:</strong> How much you're willing to pay (your budget/bid strategy)</li>
      <li><strong>Estimated Action Rate:</strong> Meta's prediction of how likely your ad will get the desired action</li>
      <li><strong>Ad Quality:</strong> Based on feedback, engagement, and relevance score</li>
    </ul>
  </div>
  <div class="success-box">This means a lower-budget advertiser with excellent creative and a relevant audience can beat a high-budget competitor with poor creative. Quality matters more than spend.</div>

  <h2>The Learning Phase</h2>
  <p>When you create or significantly change an ad set, it enters the <strong>Learning Phase</strong>. This is Meta's system figuring out the best people to show your ads to.</p>
  <div class="card card-orange">
    <h3>What happens during Learning Phase</h3>
    <ul class="bullet-list">
      <li>Meta tests different placements, audiences, and delivery times</li>
      <li>Performance is unstable ‚Äî CPMs and CPAs can be high</li>
      <li>You need <strong>50 optimization events in 7 days</strong> to exit Learning Phase</li>
      <li>Making changes resets the Learning Phase ‚Äî avoid this</li>
    </ul>
  </div>
  <div class="warning-box">If you can't get 50 conversions per week per ad set, choose a higher-funnel event. E.g., if purchases are rare, optimize for Add to Cart or View Content instead.</div>

  <h2>Budget Types: Daily vs Lifetime</h2>
  <div class="two-col">
    <div class="card card-accent">
      <h3>Daily Budget</h3>
      <p>Meta can spend up to 125% of your daily budget on any given day, but averages to your daily amount over the week.</p>
      <p><strong>Best for:</strong> Always-on campaigns, testing phases</p>
      <p><strong>Minimum:</strong> ~$5‚Äì10/day to generate useful data</p>
    </div>
    <div class="card card-green">
      <h3>Lifetime Budget</h3>
      <p>You set a total amount for the entire campaign duration. Meta optimizes delivery based on when performance is best.</p>
      <p><strong>Best for:</strong> Time-limited promotions, events, sales</p>
      <p><strong>Tip:</strong> Requires a set end date</p>
    </div>
  </div>

  <h2>ABO vs CBO</h2>
  <div class="two-col">
    <div class="card card-purple">
      <h3>ABO ‚Äî Ad Set Budget Optimization</h3>
      <p><strong>Budget set at the Ad Set level.</strong> You control exactly how much each audience/test gets.</p>
      <ul class="bullet-list">
        <li>Great for testing ‚Äî forces equal budget to each ad set</li>
        <li>More manual control</li>
        <li>Best for small tests with specific audiences</li>
      </ul>
    </div>
    <div class="card card-accent">
      <h3>CBO ‚Äî Campaign Budget Optimization</h3>
      <p><strong>Budget set at the Campaign level.</strong> Meta automatically distributes budget to the best-performing ad sets.</p>
      <ul class="bullet-list">
        <li>Great for scaling ‚Äî algorithm finds the best performer</li>
        <li>Less control (Meta may starve smaller audiences)</li>
        <li>Best for scaling proven audiences</li>
      </ul>
    </div>
  </div>

  <h2>Ad Placements</h2>
  <div class="table-wrap">
    <table>
      <thead><tr><th>Placement</th><th>Format</th><th>Notes</th></tr></thead>
      <tbody>
        <tr><td>Facebook Feed</td><td>Image, Video, Carousel</td><td>High reach, good for awareness + conversions</td></tr>
        <tr><td>Instagram Feed</td><td>Image, Video, Carousel</td><td>Visual-first, younger audience</td></tr>
        <tr><td>Facebook Reels</td><td>Vertical video (9:16)</td><td>Lower CPM, growing reach</td></tr>
        <tr><td>Instagram Reels</td><td>Vertical video (9:16)</td><td>Excellent for products targeting 18‚Äì35</td></tr>
        <tr><td>Stories (FB + IG)</td><td>Vertical image/video</td><td>Full-screen, high engagement</td></tr>
        <tr><td>Right Column (FB)</td><td>Small image</td><td>Desktop only, low CPM, low CTR</td></tr>
        <tr><td>Audience Network</td><td>Various</td><td>Outside Meta apps ‚Äî usually lower quality</td></tr>
        <tr><td>Messenger</td><td>Image + CTA</td><td>Good for chat-based funnels</td></tr>
      </tbody>
    </table>
  </div>
  <div class="info-box">Advantage+ Placements (auto-placement) is recommended by Meta. In most cases, starting with auto-placement is fine. You can exclude specific placements in the ad set settings if performance data warrants it.</div>
</div>

<!-- ===== CAMPAIGN CREATION ===== -->
<div class="page" id="page-campaign">
  <h1>‚öôÔ∏è <span class="highlight">Campaign Creation</span></h1>
  <p class="page-subtitle">Step-by-step: how to build a campaign that actually works, from objective selection to going live.</p>

  <h2>Before You Create a Campaign</h2>
  <div class="card card-red">
    <h3>Pre-Launch Checklist</h3>
    <ul class="bullet-list">
      <li>Meta Pixel is installed and firing correctly</li>
      <li>At least one conversion event is verified (use Event Testing tool)</li>
      <li>Your landing page is live and loads fast (under 3 seconds)</li>
      <li>Your ad creative is ready in correct sizes</li>
      <li>You know your target CPA or ROAS goal</li>
      <li>You have a budget for at least 7 days of testing</li>
    </ul>
  </div>

  <h2>Step-by-Step: Creating a Campaign</h2>
  <ol class="step-list">
    <li>Go to <strong>Meta Ads Manager</strong> ‚Üí Click the green <em>Create</em> button</li>
    <li>Choose your <strong>Campaign Objective</strong>. For e-commerce: Sales. For lead gen: Leads. For awareness: Awareness.</li>
    <li>Name your campaign clearly (e.g., <em>"Sales | Cold | US | [Date]"</em>)</li>
    <li>Choose <strong>CBO or ABO</strong>. For testing: ABO. For scaling: CBO.</li>
    <li>Set your campaign budget if using CBO</li>
    <li>Click <strong>Next</strong> to go to Ad Set level</li>
  </ol>

  <h2>Ad Set Configuration</h2>
  <ol class="step-list">
    <li><strong>Conversion location:</strong> Website (for website conversions)</li>
    <li><strong>Pixel:</strong> Select your installed pixel</li>
    <li><strong>Conversion event:</strong> Select your goal event (e.g., Purchase)</li>
    <li><strong>Dynamic Creative:</strong> Leave OFF during testing to maintain creative control</li>
    <li><strong>Budget & Schedule:</strong> Set daily budget (ABO) and start date. No end date for always-on.</li>
    <li><strong>Audience:</strong> Define your targeting (see Audience Targeting section)</li>
    <li><strong>Placements:</strong> Use Advantage+ Placements to start</li>
  </ol>

  <h2>Ad Configuration</h2>
  <ol class="step-list">
    <li><strong>Ad name:</strong> Be descriptive ‚Äî include format, hook, and variant (e.g., "Video_Hook1_Testimonial")</li>
    <li><strong>Facebook Page:</strong> Select your page</li>
    <li><strong>Format:</strong> Single Image, Video, or Carousel</li>
    <li><strong>Upload creative:</strong> Minimum specs ‚Äî 1080√ó1080 for feed, 1080√ó1920 for stories/reels</li>
    <li><strong>Primary Text:</strong> Your ad copy (first 125 characters show before "See More")</li>
    <li><strong>Headline:</strong> Bold, benefit-focused, under 40 characters</li>
    <li><strong>Description:</strong> Optional ‚Äî adds detail below the headline</li>
    <li><strong>Call to Action:</strong> Match to your goal: Shop Now, Learn More, Sign Up, Get Quote</li>
    <li><strong>Website URL:</strong> Your landing page (include UTM parameters)</li>
  </ol>

  <h2>UTM Parameters ‚Äî Always Use Them</h2>
  <p>UTM parameters tell Google Analytics exactly which ad brought the traffic. Never run an ad without them.</p>
  <div class="code-block"><span class="comment"># UTM URL Structure</span>
https://yoursite.com/landing-page
?utm_source=facebook
&utm_medium=paid_social
&utm_campaign=sales_cold_us
&utm_content=video_hook1_testimonial</div>

  <h2>Campaign Naming Convention</h2>
  <div class="card card-accent">
    <p>A clear naming system is critical when you have many campaigns. Use this structure:</p>
    <p><strong>Campaign:</strong> [Objective] | [Audience Type] | [Location] | [MMYYYY]</p>
    <p><strong>Ad Set:</strong> [Audience] | [Budget] | [v1/v2/v3]</p>
    <p><strong>Ad:</strong> [Format] | [Hook/Concept] | [Variant]</p>
    <p><em>Example: "Sales | Cold | US | 012025" ‚Üí "LA25-35_Women | $20/d | v1" ‚Üí "Video | PainPoint | A"</em></p>
  </div>

  <h2>Common Campaign Mistakes</h2>
  <div class="table-wrap">
    <table>
      <thead><tr><th>Mistake</th><th>Why It Hurts</th><th>Fix</th></tr></thead>
      <tbody>
        <tr><td>Wrong objective</td><td>Optimizes for wrong signal</td><td>Match objective to business goal</td></tr>
        <tr><td>Editing too frequently</td><td>Resets learning phase</td><td>Wait 72 hours minimum before changes</td></tr>
        <tr><td>No conversion event</td><td>Algorithm flies blind</td><td>Verify pixel events before launch</td></tr>
        <tr><td>Too many ad sets (ABO)</td><td>Budget too diluted</td><td>Max 3‚Äì5 ad sets per test</td></tr>
        <tr><td>Too narrow audience</td><td>High CPM, limited delivery</td><td>Minimum 500K potential reach</td></tr>
        <tr><td>No UTMs</td><td>Can't track source in GA4</td><td>Always add UTM parameters</td></tr>
      </tbody>
    </table>
  </div>
</div>

<!-- ===== AUDIENCE TARGETING ===== -->
<div class="page" id="page-audience">
  <h1>üéØ <span class="highlight">Audience Targeting</span></h1>
  <p class="page-subtitle">Who you show your ads to matters. But in 2024+, less targeting is often more effective than precise targeting.</p>

  <h2>The Targeting Landscape Has Changed</h2>
  <div class="card card-accent">
    <p>Post-iOS 14, Meta lost a lot of signal data. The platform responded by making its algorithm smarter at finding buyers without explicit interest targeting. The modern approach is: <strong>let the creative do the targeting.</strong> Your ad naturally attracts the right people when it's specific and relevant.</p>
  </div>

  <h2>Types of Audiences</h2>

  <h3>1. Core Audiences (Interest & Demographic Targeting)</h3>
  <p>You manually select interests, demographics, and behaviors. Meta shows ads to people who match.</p>
  <div class="card">
    <h4>When to use Interest Targeting</h4>
    <ul class="bullet-list">
      <li>Brand new account with zero pixel data</li>
      <li>Testing whether a specific niche responds</li>
      <li>Niche B2B audience (job titles, industries)</li>
    </ul>
    <h4>Interest Targeting Best Practices</h4>
    <ul class="bullet-list">
      <li>Stack 3‚Äì8 related interests per ad set (don't use just one)</li>
      <li>Avoid overly broad interests like "Health & Wellness" ‚Äî too generic</li>
      <li>Use competitors' brand names as interests when available</li>
      <li>Target audience size: 500K‚Äì5M for most businesses</li>
      <li>Use the "Suggestions" tool to find adjacent interests</li>
    </ul>
  </div>

  <h3>2. Broad Targeting (No Interest Targeting)</h3>
  <p>You define only age, gender, and location ‚Äî then let Meta's algorithm find the right people.</p>
  <div class="card card-green">
    <h4>Why Broad Often Outperforms Interest Targeting</h4>
    <ul class="bullet-list">
      <li>Meta's algorithm is trained on billions of data points</li>
      <li>Gives the algorithm maximum freedom to optimize</li>
      <li>Often results in lower CPM and higher conversion rates</li>
      <li>Works best when you have good pixel data (100+ purchases)</li>
    </ul>
    <div class="success-box">Pro Tip: Once you have pixel data, test a pure broad audience alongside your interest audience. In most cases with 3+ months of data, broad will win.</div>
  </div>

  <h3>3. Custom Audiences</h3>
  <p>Target people who already know your business. The highest-intent audiences available.</p>
  <div class="table-wrap">
    <table>
      <thead><tr><th>Custom Audience Type</th><th>How to Create</th><th>Best For</th></tr></thead>
      <tbody>
        <tr><td>Website Visitors</td><td>Pixel data from your site</td><td>Retargeting</td></tr>
        <tr><td>Email List</td><td>Upload CSV of customer emails</td><td>Exclusions, lookalikes</td></tr>
        <tr><td>Video Viewers</td><td>People who watched your videos</td><td>Warm retargeting</td></tr>
        <tr><td>Instagram Engagers</td><td>People who interacted with IG profile</td><td>Brand retargeting</td></tr>
        <tr><td>Facebook Page Engagers</td><td>People who liked/shared/commented</td><td>Warm audiences</td></tr>
        <tr><td>Lead Form Opens/Submits</td><td>Facebook lead form interaction</td><td>Lead nurturing</td></tr>
      </tbody>
    </table>
  </div>

  <h3>4. Lookalike Audiences</h3>
  <p>Meta finds people who look like your existing customers or engaged visitors.</p>
  <div class="card card-purple">
    <h4>How to Build Effective Lookalikes</h4>
    <ol class="step-list">
      <li>Go to Audiences ‚Üí Create Audience ‚Üí Lookalike Audience</li>
      <li>Choose your <strong>Source</strong> (the seed audience): Upload purchaser list, or use website purchasers from Pixel</li>
      <li>Choose <strong>Audience Size</strong>: 1% = closest match, 10% = broadest</li>
      <li>Start with 1% Lookalike of purchasers as your primary cold audience</li>
      <li>Test 1%, 2%, and 3% separately to find the best performer</li>
    </ol>
    <h4>Best Lookalike Sources (ranked)</h4>
    <ul class="bullet-list">
      <li>LTV (Lifetime Value) customer list ‚Äî most profitable</li>
      <li>30-day purchaser pixel event</li>
      <li>All purchasers (pixel event)</li>
      <li>Add to Cart (when purchases are limited)</li>
      <li>Email subscriber list</li>
    </ul>
  </div>

  <h2>Audience Exclusions ‚Äî Critical</h2>
  <div class="warning-box">Always exclude existing customers and recent purchasers from cold prospecting campaigns. Showing acquisition ads to people who already bought wastes budget and can annoy customers.</div>
  <div class="card">
    <h4>Standard Exclusions for Cold Prospecting</h4>
    <ul class="bullet-list">
      <li>All purchasers (180 days)</li>
      <li>Current email subscribers</li>
      <li>Website visitors who purchased (30‚Äì180 days)</li>
    </ul>
  </div>

  <h2>Frequency & Audience Fatigue</h2>
  <p><strong>Frequency</strong> is the average number of times one person has seen your ad. High frequency = ad fatigue.</p>
  <div class="table-wrap">
    <table>
      <thead><tr><th>Frequency Level</th><th>Meaning</th><th>Action</th></tr></thead>
      <tbody>
        <tr><td>1.0 ‚Äì 2.0</td><td>Healthy, fresh audience</td><td>Keep running</td></tr>
        <tr><td>2.0 ‚Äì 3.5</td><td>Good ‚Äî repeated exposure helps</td><td>Monitor CTR closely</td></tr>
        <tr><td>3.5 ‚Äì 5.0</td><td>Starting to fatigue</td><td>Refresh creative immediately</td></tr>
        <tr><td>5.0+</td><td>Audience saturated</td><td>New creatives or pause and expand audience</td></tr>
      </tbody>
    </table>
  </div>
</div>

<!-- ===== CREATIVES ===== -->
<div class="page" id="page-creatives">
  <h1>üé® <span class="highlight">Creatives & Ad Copy</span></h1>
  <p class="page-subtitle">Your creative is the single biggest performance lever. Here's how to make ads that actually convert.</p>

  <h2>The Psychology of Meta Ads</h2>
  <div class="card card-accent">
    <p>People are not on Facebook or Instagram looking for ads. They're looking at friends' photos, watching videos, reading news. Your ad is an <strong>interruption</strong>. Your job is to make that interruption so relevant and compelling that they stop scrolling.</p>
    <p>The entire creative process is about answering one question: <em>"Why should this person stop right now and pay attention to this?"</em></p>
  </div>

  <h2>The Hook ‚Äî Your Most Important Element</h2>
  <p>The hook is the first 1‚Äì3 seconds of a video or the first visual element of an image ad. If you lose them here, you lose them forever.</p>

  <h3>Types of Hooks That Work</h3>
  <div class="card card-green">
    <h4>Pattern Interrupts</h4>
    <p>Something visually unexpected ‚Äî unusual angle, bold text overlay, unexpected scene. Forces the eye to stop.</p>
  </div>
  <div class="card card-purple">
    <h4>Problem-First Hooks</h4>
    <p><em>"Tired of [pain point]?"</em> ‚Äî Lead with the problem your audience has. They immediately self-identify.</p>
  </div>
  <div class="card card-orange">
    <h4>Question Hooks</h4>
    <p><em>"Did you know 73% of people over 40 are deficient in this nutrient?"</em> ‚Äî Creates curiosity and stops scroll.</p>
  </div>
  <div class="card">
    <h4>Result Hooks</h4>
    <p>Show the end result first. "I went from $0 to $10K/month in 90 days" ‚Äî leads with the transformation.</p>
  </div>

  <h2>Ad Copy Formula</h2>
  <div class="card card-accent">
    <h3>The AIDA Framework</h3>
    <ul class="bullet-list">
      <li><strong>Attention:</strong> Hook line ‚Äî grab them immediately</li>
      <li><strong>Interest:</strong> Expand on the problem or opportunity</li>
      <li><strong>Desire:</strong> Show the benefit/transformation</li>
      <li><strong>Action:</strong> Clear, specific CTA ‚Äî tell them exactly what to do</li>
    </ul>
  </div>

  <div class="card card-green">
    <h3>The PAS Framework</h3>
    <ul class="bullet-list">
      <li><strong>Problem:</strong> State the problem clearly</li>
      <li><strong>Agitation:</strong> Make the pain feel real and urgent</li>
      <li><strong>Solution:</strong> Present your product as the solution</li>
    </ul>
  </div>

  <h2>Video Ad Structure</h2>
  <ol class="step-list">
    <li><strong>Hook (0‚Äì3 sec):</strong> Stop the scroll. Pattern interrupt or bold statement.</li>
    <li><strong>Problem (3‚Äì8 sec):</strong> Call out the pain your customer feels.</li>
    <li><strong>Agitation (8‚Äì15 sec):</strong> Make the problem feel real and costly.</li>
    <li><strong>Solution (15‚Äì25 sec):</strong> Introduce your product as the answer.</li>
    <li><strong>Proof (25‚Äì40 sec):</strong> Testimonials, results, demos.</li>
    <li><strong>CTA (last 5 sec):</strong> Clear action: "Shop now," "Try for free," "Click below."</li>
  </ol>

  <div class="info-box">Add captions/subtitles to ALL video ads. 85% of Facebook videos are watched without sound. If they can't read your message, you lose them.</div>

  <h2>UGC Ads (User Generated Content)</h2>
  <p>UGC ads are phone-quality videos made to look like organic content ‚Äî testimonials, unboxings, reviews, how-tos. They consistently outperform polished studio ads because they feel authentic.</p>
  <div class="card card-green">
    <h3>UGC Ad Best Practices</h3>
    <ul class="bullet-list">
      <li>Film in portrait (9:16) on a phone ‚Äî raw and authentic</li>
      <li>Creator should speak directly to camera in first person</li>
      <li>Lead with personal story or honest opinion</li>
      <li>Include before/after if applicable</li>
      <li>Keep it 30‚Äì60 seconds</li>
      <li>End with a natural, non-salesy CTA</li>
    </ul>
  </div>

  <h2>Creative Testing Framework</h2>
  <div class="card card-purple">
    <h3>The Structured Creative Test</h3>
    <ol class="step-list">
      <li>Test one variable at a time (hook OR format OR copy ‚Äî not all three)</li>
      <li>Run 3‚Äì4 creatives per ad set minimum</li>
      <li>Give each creative at least $50 spend before judging</li>
      <li>The winner is determined by lowest CPA, not highest CTR</li>
      <li>Kill losers, scale winners, then test the next variable</li>
    </ol>
  </div>

  <h2>Creative Specs (2024)</h2>
  <div class="table-wrap">
    <table>
      <thead><tr><th>Placement</th><th>Ratio</th><th>Min Resolution</th><th>Video Length</th></tr></thead>
      <tbody>
        <tr><td>Facebook/Instagram Feed</td><td>1:1 or 4:5</td><td>1080√ó1080</td><td>1 sec ‚Äì 241 min</td></tr>
        <tr><td>Stories & Reels</td><td>9:16</td><td>1080√ó1920</td><td>1‚Äì60 sec (ads)</td></tr>
        <tr><td>Right Column</td><td>1.91:1</td><td>1200√ó628</td><td>N/A</td></tr>
        <tr><td>Carousel</td><td>1:1</td><td>1080√ó1080</td><td>Per card: 1‚Äì240 min</td></tr>
      </tbody>
    </table>
  </div>
</div>

<!-- ===== OPTIMIZATION ===== -->
<div class="page" id="page-optimization">
  <h1>üìà <span class="highlight">Optimization & Metrics</span></h1>
  <p class="page-subtitle">Read your numbers like a marketer, not an accountant. Here's what every metric means and exactly what to do about it.</p>

  <div class="kpi-grid">
    <div class="kpi-card"><div class="kpi-label">CPM</div><div class="kpi-val">Cost Per Mille</div><div class="kpi-desc">Cost per 1,000 impressions</div></div>
    <div class="kpi-card"><div class="kpi-label">CTR</div><div class="kpi-val">Click Through</div><div class="kpi-desc">% who click after seeing ad</div></div>
    <div class="kpi-card"><div class="kpi-label">CPC</div><div class="kpi-val">Cost Per Click</div><div class="kpi-desc">Average cost per link click</div></div>
    <div class="kpi-card"><div class="kpi-label">CPA</div><div class="kpi-val">Cost Per Action</div><div class="kpi-desc">Cost per conversion event</div></div>
    <div class="kpi-card"><div class="kpi-label">ROAS</div><div class="kpi-val">Return on Ad Spend</div><div class="kpi-desc">Revenue √∑ Ad Spend</div></div>
    <div class="kpi-card"><div class="kpi-label">CVR</div><div class="kpi-val">Conversion Rate</div><div class="kpi-desc">% who convert after clicking</div></div>
  </div>

  <h2>CPM ‚Äî Cost Per 1,000 Impressions</h2>
  <div class="card card-accent">
    <h3>What CPM Tells You</h3>
    <p>CPM measures how expensive it is to reach 1,000 people. High CPM = expensive reach. Low CPM = cheap reach.</p>
    <div class="table-wrap">
      <table>
        <thead><tr><th>CPM Range</th><th>Meaning</th><th>Action</th></tr></thead>
        <tbody>
          <tr><td>$5‚Äì$15</td><td>Low ‚Äî good efficiency</td><td>Scale if CTR is also good</td></tr>
          <tr><td>$15‚Äì$35</td><td>Normal for most niches</td><td>Monitor other metrics</td></tr>
          <tr><td>$35‚Äì$60</td><td>High ‚Äî competitive audience</td><td>Improve ad quality score</td></tr>
          <tr><td>$60+</td><td>Very high ‚Äî possible issues</td><td>Broaden audience, refresh creative</td></tr>
        </tbody>
      </table>
    </div>
    <h4>Causes of High CPM</h4>
    <ul class="bullet-list">
      <li>Highly competitive audience (finance, insurance, legal)</li>
      <li>Too narrow audience size</li>
      <li>Low quality score / ad relevance</li>
      <li>Q4 seasonal competition (Oct‚ÄìDec)</li>
      <li>Multiple advertisers targeting same demographic</li>
    </ul>
  </div>

  <h2>CTR ‚Äî Click-Through Rate</h2>
  <div class="card card-green">
    <p><strong>Formula:</strong> (Clicks √∑ Impressions) √ó 100</p>
    <p><strong>Benchmark:</strong> 1%+ is good for cold audiences. 2%+ is excellent. Under 0.5% is a problem.</p>
    <div class="table-wrap">
      <table>
        <thead><tr><th>CTR</th><th>Diagnosis</th><th>Fix</th></tr></thead>
        <tbody>
          <tr><td>Under 0.5%</td><td>Creative failing to stop scroll</td><td>New hooks, stronger visual</td></tr>
          <tr><td>0.5%‚Äì1%</td><td>Below average</td><td>Test new creatives, check audience relevance</td></tr>
          <tr><td>1%‚Äì2%</td><td>Normal / Good</td><td>Optimize next metric (CVR)</td></tr>
          <tr><td>2%+</td><td>Strong creative</td><td>Scale if CPA is good</td></tr>
        </tbody>
      </table>
    </div>
    <div class="warning-box">High CTR + High CPA = Landing page problem. People are clicking but not converting. Fix the page, not the ad.</div>
  </div>

  <h2>CPA ‚Äî Cost Per Acquisition</h2>
  <div class="card card-orange">
    <p>CPA is your most important metric. It tells you what you're paying for each conversion (purchase, lead, signup).</p>
    <p><strong>Target CPA calculation:</strong> If product sells for $100 and you want 50% margin, max CPA = $50.</p>
    <h4>Diagnosing High CPA</h4>
    <ul class="bullet-list">
      <li>High CPM ‚Üí Expensive traffic ‚Üí Fix: audience or quality</li>
      <li>Low CTR ‚Üí Bad creative ‚Üí Fix: new hooks and creatives</li>
      <li>Good CTR + Low CVR ‚Üí Landing page issue ‚Üí Fix: improve page</li>
      <li>Good everything ‚Üí Offer problem ‚Üí Fix: pricing, value prop</li>
    </ul>
  </div>

  <h2>ROAS ‚Äî Return on Ad Spend</h2>
  <div class="card card-purple">
    <p><strong>Formula:</strong> Revenue √∑ Ad Spend</p>
    <p><strong>Example:</strong> $1,000 revenue from $200 spend = 5x ROAS</p>
    <h4>ROAS Benchmarks by Business Type</h4>
    <ul class="bullet-list">
      <li><strong>E-commerce (high margin):</strong> Target 3‚Äì5x ROAS</li>
      <li><strong>E-commerce (low margin):</strong> Need 7‚Äì10x ROAS to be profitable</li>
      <li><strong>Lead generation:</strong> ROAS not relevant ‚Äî focus on CPL and close rate</li>
      <li><strong>SaaS/subscription:</strong> Use LTV-adjusted ROAS (allow lower short-term)</li>
    </ul>
    <div class="warning-box">Meta ROAS and actual ROAS often differ due to attribution windows and iOS tracking. Always cross-reference with GA4 and your actual revenue data.</div>
  </div>

  <h2>Conversion Rate (CVR)</h2>
  <div class="card card-accent">
    <p><strong>Formula:</strong> (Conversions √∑ Clicks) √ó 100</p>
    <p><strong>Benchmark:</strong> 1‚Äì3% for e-commerce. 5‚Äì20% for lead gen forms.</p>
    <h4>Low CVR Causes</h4>
    <ul class="bullet-list">
      <li>Slow page load (every extra second drops CVR by ~7%)</li>
      <li>Mismatch between ad promise and landing page</li>
      <li>Weak offer or unclear value proposition</li>
      <li>Poor mobile experience (70%+ of traffic is mobile)</li>
      <li>Trust signals missing (reviews, guarantees, social proof)</li>
    </ul>
  </div>

  <h2>Optimization Checklist</h2>
  <div class="card card-green">
    <h3>Weekly Optimization Routine</h3>
    <ol class="step-list">
      <li>Check spend vs budget ‚Äî is it delivering fully?</li>
      <li>Review CPM ‚Äî higher than normal? Check audience and quality</li>
      <li>Review CTR ‚Äî under 1%? Time for new creatives</li>
      <li>Review CPA ‚Äî above target? Find the bottleneck (see above)</li>
      <li>Check frequency ‚Äî above 3.5? Refresh creatives</li>
      <li>Review ROAS ‚Äî profitable? Scale. Not profitable? Fix before scaling.</li>
      <li>Kill underperforming creatives (spent $50+ and 2x target CPA)</li>
      <li>Scale winners (duplicate + increase budget 20‚Äì30%)</li>
    </ol>
  </div>
</div>

<!-- ===== SCALING ===== -->
<div class="page" id="page-scaling">
  <h1>üìä <span class="highlight">Scaling Strategies</span></h1>
  <p class="page-subtitle">You've found a campaign that works. Now grow it without breaking it.</p>

  <h2>The Golden Rule of Scaling</h2>
  <div class="card card-accent">
    <p><strong>Never scale what isn't profitable first.</strong> Scaling amplifies everything ‚Äî good AND bad. Make sure your CPA is below your target before adding budget.</p>
  </div>

  <h2>Vertical Scaling ‚Äî Increasing Budget</h2>
  <div class="card card-green">
    <h3>Safe Budget Increase Method</h3>
    <p>Increase budget by <strong>20‚Äì30% every 3‚Äì4 days</strong>. Never double your budget overnight ‚Äî this resets the learning phase and destabilizes delivery.</p>
    <ol class="step-list">
      <li>Confirm campaign is profitable for 3+ consecutive days</li>
      <li>Increase daily budget by 20‚Äì30%</li>
      <li>Wait 3 days ‚Äî don't touch it</li>
      <li>If still profitable, increase again</li>
      <li>Repeat until you hit performance degradation</li>
    </ol>
    <div class="warning-box">Performance often degrades at scale because you're reaching less and less qualified people. Have fresh creatives ready before you scale.</div>
  </div>

  <h2>Horizontal Scaling ‚Äî Duplicating Campaigns</h2>
  <div class="card card-purple">
    <p>Instead of increasing one campaign's budget, you <strong>duplicate the winning campaign</strong> and run it alongside the original. Each campaign starts fresh with its own learning phase but uses the winning creative.</p>
    <h4>When to Duplicate</h4>
    <ul class="bullet-list">
      <li>You've hit a budget ceiling and performance is degrading</li>
      <li>You want to test a new audience with the same creative</li>
      <li>You want to test CBO vs ABO with the same setup</li>
    </ul>
  </div>

  <h2>CBO Scaling Structure</h2>
  <div class="card">
    <h3>The Scaling Campaign Structure</h3>
    <p>Create a CBO campaign with multiple ad sets, each targeting a different validated audience. Let Meta allocate budget to winners automatically.</p>
    <div class="code-block">CBO Campaign ‚Äî $500/day budget
‚îú‚îÄ‚îÄ Ad Set 1: 1% Lookalike Purchasers
‚îú‚îÄ‚îÄ Ad Set 2: 2% Lookalike Purchasers
‚îú‚îÄ‚îÄ Ad Set 3: Interest Stack A
‚îú‚îÄ‚îÄ Ad Set 4: Broad (no interests)
‚îî‚îÄ‚îÄ Each ad set has the same 3 winning creatives</div>
  </div>

  <h2>Scaling Without Creative = Scaling to Failure</h2>
  <div class="card card-orange">
    <p>The #1 reason scaled campaigns fail: <strong>creative fatigue</strong>. As you reach more people, frequency rises, performance drops. You must constantly produce new creatives.</p>
    <h4>Creative Scaling Calendar</h4>
    <ul class="bullet-list">
      <li>Week 1: Launch 4 creatives</li>
      <li>Week 2: Kill 2 losers, launch 2 new creatives</li>
      <li>Week 3: Scale winner + add 2 new variants</li>
      <li>Week 4: Refresh all ‚Äî new hooks, new formats</li>
    </ul>
  </div>

  <h2>Scaling Checklist</h2>
  <ol class="step-list">
    <li>CPA is profitable and stable for 3+ days</li>
    <li>Frequency is below 3.5</li>
    <li>Learning phase has exited ("Active" status)</li>
    <li>New creatives are ready to inject</li>
    <li>Tracking is verified and accurate</li>
    <li>Budget increase is ‚â§30% per adjustment</li>
    <li>Weekly analysis scheduled in advance</li>
  </ol>
</div>

<!-- ===== RETARGETING ===== -->
<div class="page" id="page-retargeting">
  <h1>üîÑ <span class="highlight">Retargeting Strategies</span></h1>
  <p class="page-subtitle">Target people who've already shown interest. Retargeting is usually your highest-ROAS campaign type.</p>

  <h2>Why Retargeting Works</h2>
  <div class="card card-accent">
    <p>The average buyer doesn't convert on first contact. Research suggests 7+ touchpoints before a purchase decision. Retargeting ensures you follow up with warm audiences ‚Äî people who already know your brand and are actively considering.</p>
  </div>

  <h2>The Retargeting Funnel</h2>
  <div class="card">
    <h3>3-Level Retargeting Structure</h3>
    <div class="code-block">HOT (Bottom Funnel)
‚îú‚îÄ‚îÄ Cart Abandoners (1‚Äì7 days)
‚îú‚îÄ‚îÄ Checkout Initiators (1‚Äì14 days)
‚îî‚îÄ‚îÄ Ad: Urgency, objection removal, discount

WARM (Mid Funnel)
‚îú‚îÄ‚îÄ Product Page Visitors (8‚Äì30 days)
‚îú‚îÄ‚îÄ Add-to-Cart (not purchased) (8‚Äì30 days)
‚îî‚îÄ‚îÄ Ad: Social proof, testimonials, benefits

COOL (Top Funnel Retarget)
‚îú‚îÄ‚îÄ Website Visitors (31‚Äì90 days)
‚îú‚îÄ‚îÄ Video Viewers (50%+)
‚îî‚îÄ‚îÄ Ad: Value, storytelling, soft CTA</div>
  </div>

  <h2>Retargeting Windows ‚Äî Which to Use</h2>
  <div class="table-wrap">
    <table>
      <thead><tr><th>Window</th><th>Audience</th><th>Message Type</th></tr></thead>
      <tbody>
        <tr><td>1‚Äì3 days</td><td>Cart abandoners</td><td>"You left something behind" + urgency</td></tr>
        <tr><td>7 days</td><td>Recent visitors</td><td>Top benefit + social proof</td></tr>
        <tr><td>14 days</td><td>Warm visitors</td><td>Testimonials + offer</td></tr>
        <tr><td>30 days</td><td>All website visitors</td><td>Value content + soft sell</td></tr>
        <tr><td>60‚Äì90 days</td><td>Old visitors</td><td>New arrivals, promotions</td></tr>
        <tr><td>180 days</td><td>Past customers</td><td>Cross-sell, upsell, win-back</td></tr>
      </tbody>
    </table>
  </div>

  <h2>Retargeting Ad Strategies</h2>
  <div class="card card-green">
    <h3>For Cart Abandoners</h3>
    <ul class="bullet-list">
      <li>Show the exact products they viewed (Dynamic Ads)</li>
      <li>Address common objections: "Free shipping," "30-day returns"</li>
      <li>Create urgency: "Only 3 left in stock"</li>
      <li>Offer a small incentive (5‚Äì10% discount) as last resort</li>
    </ul>
  </div>

  <div class="card card-purple">
    <h3>Dynamic Product Ads (DPA)</h3>
    <p>DPAs automatically show users the specific products they viewed on your site. Requires a Product Catalog connected to your pixel.</p>
    <ol class="step-list">
      <li>Set up a Product Catalog in Commerce Manager</li>
      <li>Connect your Pixel to the catalog</li>
      <li>Verify ViewContent, AddToCart, Purchase events firing with product IDs</li>
      <li>Create campaign with Sales objective ‚Üí Catalog Sales</li>
      <li>Set retargeting window and exclusions</li>
    </ol>
  </div>

  <h2>Retargeting Budget Allocation</h2>
  <div class="info-box">As a general rule, allocate 80% of budget to prospecting and 20% to retargeting. Retargeting audiences are small ‚Äî overspending there leads to very high frequency quickly.</div>
</div>

<!-- ===== TRACKING ===== -->
<div class="page" id="page-tracking">
  <h1>üîç <span class="highlight">Tracking & Analytics</span></h1>
  <p class="page-subtitle">Tracking is the foundation. Without accurate data, every optimization decision is a guess.</p>

  <h2>The Meta Pixel</h2>
  <p>The Meta Pixel is a piece of JavaScript code you place on your website. It fires events back to Meta every time someone takes an action ‚Äî viewing a page, adding to cart, purchasing.</p>

  <h3>Installing the Pixel</h3>
  <ol class="step-list">
    <li>Go to <strong>Meta Events Manager</strong> ‚Üí Pixels ‚Üí Add Pixel</li>
    <li>Name your pixel and enter your website URL</li>
    <li>Choose install method: Meta Pixel Helper, Partner Integration (Shopify, WordPress), or Manual code</li>
    <li>Copy the base pixel code and paste in your website's &lt;head&gt; section</li>
    <li>Verify with the <strong>Meta Pixel Helper Chrome extension</strong></li>
  </ol>

  <h3>Standard Events</h3>
  <div class="table-wrap">
    <table>
      <thead><tr><th>Event</th><th>When to Fire</th><th>Priority</th></tr></thead>
      <tbody>
        <tr><td>PageView</td><td>Every page load</td><td>Auto-fires with base code</td></tr>
        <tr><td>ViewContent</td><td>Product or content page view</td><td>High</td></tr>
        <tr><td>AddToCart</td><td>User clicks Add to Cart</td><td>High</td></tr>
        <tr><td>InitiateCheckout</td><td>Checkout page loaded</td><td>High</td></tr>
        <tr><td>Purchase</td><td>Order confirmation page</td><td>Critical</td></tr>
        <tr><td>Lead</td><td>Form submitted</td><td>Critical</td></tr>
        <tr><td>CompleteRegistration</td><td>Account creation</td><td>Medium</td></tr>
        <tr><td>Search</td><td>Search performed on site</td><td>Low</td></tr>
      </tbody>
    </table>
  </div>

  <h3>Purchase Event Code Example</h3>
  <div class="code-block"><span class="comment">// Fire on order confirmation page</span>
<span class="func">fbq</span>(<span class="string">'track'</span>, <span class="string">'Purchase'</span>, {
  value: <span class="string">'49.99'</span>,         <span class="comment">// Order total</span>
  currency: <span class="string">'USD'</span>,        <span class="comment">// Currency code</span>
  content_ids: [<span class="string">'SKU123'</span>], <span class="comment">// Product IDs</span>
  content_type: <span class="string">'product'</span>,
  num_items: <span class="string">1</span>
});</div>

  <h3>Event Prioritization (iOS 14 Requirement)</h3>
  <div class="warning-box">After iOS 14, you must configure and prioritize up to 8 conversion events per domain in Events Manager. Only these 8 events will be tracked for iOS 14.5+ users. Choose your most valuable events and rank them.</div>
  <p><strong>Recommended priority order (e-commerce):</strong> Purchase ‚Üí InitiateCheckout ‚Üí AddToCart ‚Üí ViewContent ‚Üí Lead ‚Üí CompleteRegistration ‚Üí Search ‚Üí PageView</p>

  <h2>Why Meta Numbers Don't Match GA4</h2>
  <div class="card card-orange">
    <h3>Attribution Differences</h3>
    <ul class="bullet-list">
      <li><strong>Meta default attribution:</strong> 7-day click + 1-day view (counts conversions up to 7 days after click)</li>
      <li><strong>GA4 default attribution:</strong> Last click (only credits the last touch)</li>
      <li><strong>iOS 14 impact:</strong> Meta can't track all iOS conversions ‚Äî some are modeled (estimated)</li>
      <li><strong>Cross-device:</strong> Someone clicks on phone, buys on desktop ‚Äî Meta tracks it, GA4 may not</li>
    </ul>
    <p>Always use Meta's numbers as your primary source for Meta campaign decisions. Use GA4 for cross-channel analysis.</p>
  </div>
</div>

<!-- ===== GTM ===== -->
<div class="page" id="page-gtm">
  <h1>üè∑Ô∏è <span class="highlight">Google Tag Manager ‚Äî Full Guide</span></h1>
  <p class="page-subtitle">GTM lets you add and manage tracking code on your website without editing code every time.</p>

  <h2>What is Google Tag Manager?</h2>
  <div class="card card-accent">
    <p><strong>Simple:</strong> GTM is a tool that lets you add, remove, and manage scripts on your website from a dashboard ‚Äî without touching code.</p>
    <p><strong>Professional:</strong> GTM is a tag management system (TMS) that acts as a container for marketing and analytics tags. Instead of hardcoding every pixel, analytics script, or tracking tag into your site, you install GTM once. Then all future tracking deployments happen through the GTM interface.</p>
  </div>

  <h2>Core Concepts</h2>

  <div class="card card-green">
    <h3>üè∑Ô∏è Tags</h3>
    <p><strong>What they are:</strong> The scripts that actually run ‚Äî e.g., "Fire the Meta Pixel Purchase event" or "Send a GA4 event."</p>
    <p><strong>Examples:</strong> GA4 Configuration Tag, Meta Pixel Base Code, Google Ads Conversion Tag</p>
  </div>

  <div class="card card-purple">
    <h3>‚ö° Triggers</h3>
    <p><strong>What they are:</strong> The conditions that determine WHEN a tag fires.</p>
    <p><strong>Examples:</strong> "Fire when URL contains /thank-you" or "Fire when someone clicks the Buy button"</p>
  </div>

  <div class="card card-orange">
    <h3>üì¶ Variables</h3>
    <p><strong>What they are:</strong> Dynamic values that tags and triggers can reference.</p>
    <p><strong>Examples:</strong> Page URL, clicked element's class, data layer values like order total</p>
  </div>

  <h2>Setting Up GTM</h2>
  <ol class="step-list">
    <li>Go to <strong>tagmanager.google.com</strong> ‚Üí Create Account ‚Üí Create Container</li>
    <li>Choose platform: Web</li>
    <li>Copy the two code snippets provided</li>
    <li>Paste the first snippet in your site's &lt;head&gt;, second in &lt;body&gt;</li>
    <li>Verify installation with <strong>GTM Preview Mode</strong> or the Tag Assistant Chrome extension</li>
  </ol>

  <h2>Installing Meta Pixel via GTM</h2>
  <ol class="step-list">
    <li>In GTM: New Tag ‚Üí Custom HTML</li>
    <li>Paste the Meta Pixel base code (from Events Manager)</li>
    <li>Set trigger: All Pages</li>
    <li>Name it "Meta Pixel ‚Äî Base Code"</li>
    <li>Save and Preview to verify it fires on all pages</li>
  </ol>

  <h2>Tracking Button Clicks in GTM</h2>
  <div class="card">
    <ol class="step-list">
      <li>Enable the built-in variable: <strong>Click Classes</strong> and <strong>Click ID</strong></li>
      <li>Go to Preview mode on your site, click the target button</li>
      <li>In GTM Preview, find the "Click" event and note the Click Classes or Click ID</li>
      <li>Create a new Trigger: Trigger Type = Click ‚Äî All Elements (or Just Links)</li>
      <li>Set condition: Click Classes contains [your button class]</li>
      <li>Create a Tag that fires on this trigger (e.g., GA4 Event or Meta Custom Event)</li>
    </ol>
  </div>

  <h2>The Data Layer</h2>
  <p>The Data Layer is a JavaScript object that sits on your page and stores data that GTM can read. It's how you pass dynamic values (like order totals) into GTM tags.</p>
  <div class="code-block"><span class="comment">// Push purchase data to Data Layer on order confirmation page</span>
window.dataLayer = window.dataLayer || [];
window.dataLayer.push({
  <span class="string">'event'</span>: <span class="string">'purchase'</span>,
  <span class="string">'ecommerce'</span>: {
    <span class="string">'transaction_id'</span>: <span class="string">'T_12345'</span>,
    <span class="string">'value'</span>: <span class="string">49.99</span>,
    <span class="string">'currency'</span>: <span class="string">'USD'</span>,
    <span class="string">'items'</span>: [{
      <span class="string">'item_id'</span>: <span class="string">'SKU_123'</span>,
      <span class="string">'item_name'</span>: <span class="string">'Product Name'</span>,
      <span class="string">'price'</span>: <span class="string">49.99</span>
    }]
  }
});</div>

  <h2>Form Tracking</h2>
  <ol class="step-list">
    <li>Enable built-in variable: Form ID, Form Classes</li>
    <li>Create Trigger: Form Submission ‚Äî where Form ID equals [your form ID]</li>
    <li>Check "Wait for Tags" and "Check Validation" options</li>
    <li>Create GA4 Event Tag: event name "lead_form_submit"</li>
    <li>Verify in GTM Preview by submitting a test form</li>
  </ol>

  <h2>Testing & Publishing</h2>
  <div class="card card-green">
    <h3>GTM Publishing Workflow</h3>
    <ol class="step-list">
      <li>Always use <strong>Preview Mode</strong> before publishing</li>
      <li>Test every tag by triggering the action on your site</li>
      <li>Confirm tags fire in the Preview panel</li>
      <li>Check GA4 DebugView to confirm events arrive</li>
      <li>When verified: <strong>Submit</strong> ‚Üí add version description ‚Üí <strong>Publish</strong></li>
    </ol>
  </div>
</div>

<!-- ===== GA4 ===== -->
<div class="page" id="page-ga4">
  <h1>üìâ <span class="highlight">GA4 Full Guide</span></h1>
  <p class="page-subtitle">Google Analytics 4 is your cross-channel analytics hub. Here's how to set it up and actually use it for Meta optimization.</p>

  <h2>GA4 vs Universal Analytics</h2>
  <div class="card card-orange">
    <p>GA4 is built on an <strong>event-based model</strong>. Everything is an event ‚Äî page views, scrolls, clicks, purchases. This is different from UA which was session-based. GA4 gives you more flexibility and better cross-device tracking.</p>
  </div>

  <h2>Setting Up a GA4 Property</h2>
  <ol class="step-list">
    <li>Go to <strong>analytics.google.com</strong> ‚Üí Admin ‚Üí Create Property</li>
    <li>Select "Web" as your data stream</li>
    <li>Enter your website URL</li>
    <li>Copy the Measurement ID (G-XXXXXXXXXX)</li>
    <li>Install via GTM (recommended) or paste directly in &lt;head&gt;</li>
    <li>Verify in GA4 DebugView within 5 minutes</li>
  </ol>

  <h2>GA4 via GTM (Recommended Method)</h2>
  <ol class="step-list">
    <li>In GTM: New Tag ‚Üí Google Tag ‚Üí Enter Measurement ID</li>
    <li>Set trigger: All Pages</li>
    <li>This sends PageView events automatically</li>
    <li>Create separate GA4 Event Tags for custom events (purchase, lead, etc.)</li>
  </ol>

  <h2>Enhanced Measurement</h2>
  <p>GA4 has built-in enhanced measurement that automatically tracks scroll depth, outbound link clicks, site search, video engagement, and file downloads ‚Äî with no additional code.</p>
  <div class="success-box">Enable Enhanced Measurement in GA4 Data Streams ‚Üí enable all relevant toggles. This gives you free event tracking without writing any code.</div>

  <h2>Marking Events as Conversions</h2>
  <ol class="step-list">
    <li>Go to GA4 ‚Üí Configure ‚Üí Events</li>
    <li>Find your key events (purchase, generate_lead)</li>
    <li>Toggle "Mark as conversion"</li>
    <li>Conversions appear in Reports ‚Üí Conversions</li>
  </ol>

  <h2>GA4 Funnels</h2>
  <div class="card card-accent">
    <p>GA4 Funnel Exploration lets you visualize the path from visitor to purchaser and identify drop-off points.</p>
    <ol class="step-list">
      <li>GA4 ‚Üí Explore ‚Üí Funnel Exploration</li>
      <li>Define steps: session_start ‚Üí view_item ‚Üí add_to_cart ‚Üí begin_checkout ‚Üí purchase</li>
      <li>Look for the biggest drop-off % ‚Äî that's where to focus your optimization</li>
    </ol>
  </div>

  <h2>Debug View</h2>
  <div class="card card-green">
    <p>GA4 DebugView shows real-time events from your device, perfect for testing tracking implementations.</p>
    <ol class="step-list">
      <li>Install the Google Analytics Debugger Chrome extension</li>
      <li>Go to GA4 ‚Üí Configure ‚Üí DebugView</li>
      <li>Browse your site ‚Äî events appear in real-time</li>
      <li>Verify event names, parameters, and values are correct</li>
    </ol>
  </div>

  <h2>Using GA4 Data to Optimize Meta Campaigns</h2>
  <div class="card card-purple">
    <h3>Key GA4 Reports for Meta Marketers</h3>
    <ul class="bullet-list">
      <li><strong>Acquisition ‚Üí Traffic Acquisition:</strong> See Facebook/paid social sessions and conversion rate</li>
      <li><strong>Engagement ‚Üí Landing Pages:</strong> Which pages convert best from Meta traffic</li>
      <li><strong>Explore ‚Üí Path Exploration:</strong> How Meta visitors navigate your site</li>
      <li><strong>Attribution ‚Üí Model Comparison:</strong> Compare first-click vs last-click to understand Meta's role</li>
    </ul>
  </div>
</div>

<!-- ===== CONVERSION API ===== -->
<div class="page" id="page-capi">
  <h1>üîå <span class="highlight">Conversion API (CAPI)</span></h1>
  <p class="page-subtitle">Server-side tracking that works even when the browser can't. Essential post-iOS 14.</p>

  <h2>Why You Need Conversion API</h2>
  <div class="card card-red">
    <h3>The iOS 14 Problem</h3>
    <p>When Apple's iOS 14.5 launched in April 2021, it required all apps to ask permission before tracking. Most users opted out. This broke the Meta Pixel for a large portion of iPhone users.</p>
    <p><strong>Result:</strong> Advertisers lost 30‚Äì50% of their conversion tracking data. Campaigns became harder to optimize and report accurately.</p>
  </div>

  <h2>How CAPI Works</h2>
  <div class="card card-accent">
    <p>Instead of the browser sending conversion data to Meta (which can be blocked), your <strong>server sends the data directly to Meta's API</strong>. This bypasses ad blockers, iOS restrictions, and browser limitations.</p>
    <div class="code-block">Browser Pixel (may be blocked):
User ‚Üí Browser ‚Üí Meta Pixel ‚Üí Meta

Conversion API (can't be blocked):
User ‚Üí Browser ‚Üí Your Server ‚Üí Meta CAPI ‚Üí Meta</div>
  </div>

  <h2>Browser Pixel + CAPI Together</h2>
  <div class="success-box">The gold standard is running BOTH browser Pixel AND CAPI simultaneously. This ensures maximum signal. Deduplication handles duplicate events ‚Äî same event from both sources is counted only once.</div>

  <h2>Event Deduplication</h2>
  <p>To prevent double-counting when both Pixel and CAPI fire the same event, you must send matching <strong>event_id</strong> parameters from both sources.</p>
  <div class="code-block"><span class="comment">// Browser Pixel (client-side)</span>
<span class="func">fbq</span>(<span class="string">'track'</span>, <span class="string">'Purchase'</span>, {
  value: <span class="string">'49.99'</span>,
  currency: <span class="string">'USD'</span>
}, { eventID: <span class="string">'order_12345'</span> }); <span class="comment">// Must match CAPI event_id</span>

<span class="comment">// CAPI Server-side (Python example)</span>
event = Event(
  event_name=<span class="string">"Purchase"</span>,
  event_time=<span class="func">int</span>(time.time()),
  event_id=<span class="string">"order_12345"</span>,  <span class="comment"># Must match pixel eventID</span>
  user_data=user_data,
  custom_data=CustomData(
    value=<span class="string">49.99</span>,
    currency=<span class="string">"USD"</span>
  )
)</div>

  <h2>CAPI Setup Options</h2>
  <div class="table-wrap">
    <table>
      <thead><tr><th>Method</th><th>Difficulty</th><th>Best For</th></tr></thead>
      <tbody>
        <tr><td>Shopify Native CAPI Integration</td><td>Easy</td><td>Shopify stores</td></tr>
        <tr><td>Meta's Partner Integrations (Zapier, etc.)</td><td>Medium</td><td>Simple event firing</td></tr>
        <tr><td>GTM Server-Side</td><td>Medium-Hard</td><td>Full control, no custom dev</td></tr>
        <tr><td>Custom Server API (Python, Node.js)</td><td>Hard</td><td>Maximum flexibility</td></tr>
      </tbody>
    </table>
  </div>

  <h2>GTM Server-Side Setup</h2>
  <ol class="step-list">
    <li>Create a <strong>Server Container</strong> in GTM</li>
    <li>Deploy to App Engine (Google Cloud) or other hosting</li>
    <li>Add Meta Pixel tag to Server Container</li>
    <li>Configure a custom subdomain (track.yourdomain.com)</li>
    <li>Update your web container to send events to your server URL</li>
    <li>Test in Meta Events Manager ‚Üí Test Events</li>
  </ol>

  <h2>Verifying Your CAPI Setup</h2>
  <div class="card card-green">
    <h3>Event Match Quality (EMQ) Score</h3>
    <p>In Meta Events Manager, you'll see an <strong>Event Match Quality</strong> score (1‚Äì10) for each event. This measures how well your customer data matches Meta profiles.</p>
    <ul class="bullet-list">
      <li>Always send: email (hashed), phone (hashed), first name, last name</li>
      <li>Add: IP address, User Agent, Facebook Browser ID (fbc), Facebook Click ID (fbp)</li>
      <li>Target: EMQ of 7+ for good optimization signal</li>
    </ul>
  </div>
</div>

<!-- ===== ADVANCED ===== -->
<div class="page" id="page-advanced">
  <h1>‚ö° <span class="highlight">Advanced Meta Ads</span></h1>
  <p class="page-subtitle">For experienced marketers ready to build sophisticated systems.</p>

  <h2>Advantage+ Shopping Campaigns (ASC)</h2>
  <div class="card card-accent">
    <p>ASC is Meta's fully automated campaign type for e-commerce. You provide creatives and a budget ‚Äî Meta handles everything else: audience, placements, optimization.</p>
    <h4>When to Use ASC</h4>
    <ul class="bullet-list">
      <li>Your account has 100+ purchases in the last 30 days</li>
      <li>You want to simplify and consolidate campaigns</li>
      <li>Testing it against manual campaigns (often wins at scale)</li>
    </ul>
    <div class="warning-box">ASC can cannibalize retargeting. Use Existing Customer Budget Cap to control spending on warm audiences (e.g., cap at 10‚Äì15% for new customer acquisition focus).</div>
  </div>

  <h2>Creative Automation</h2>
  <div class="card card-green">
    <h3>Dynamic Creative Optimization (DCO)</h3>
    <p>Provide multiple creative elements (5 images, 5 headlines, 5 copy variants) and Meta automatically tests all combinations, showing the best to each user.</p>
    <h4>DCO Best Practices</h4>
    <ul class="bullet-list">
      <li>Use at the scaling phase ‚Äî not during initial testing (you lose visibility)</li>
      <li>Ensure all combinations make sense together (headlines + images)</li>
      <li>Review Breakdown ‚Üí Dynamic Creative to see what's winning</li>
    </ul>
  </div>

  <h2>Advanced Bidding Strategies</h2>
  <div class="table-wrap">
    <table>
      <thead><tr><th>Bid Strategy</th><th>How It Works</th><th>When to Use</th></tr></thead>
      <tbody>
        <tr><td><strong>Lowest Cost (default)</strong></td><td>Meta spends your budget at the lowest CPA it can find</td><td>Testing phase, always-on campaigns</td></tr>
        <tr><td><strong>Cost Cap</strong></td><td>Meta targets a specific CPA you set</td><td>When you know your max CPA exactly</td></tr>
        <tr><td><strong>Bid Cap</strong></td><td>You set maximum bid per auction</td><td>Advanced ‚Äî when CPM control is needed</td></tr>
        <tr><td><strong>Minimum ROAS</strong></td><td>Meta only delivers when ROAS target is met</td><td>E-commerce scaling, profitable campaigns</td></tr>
      </tbody>
    </table>
  </div>

  <div class="warning-box">Cost Cap and Bid Cap can severely limit delivery. If you use them, start with a cap 20‚Äì30% above your current average CPA to give the algorithm room to operate.</div>

  <h2>Attribution Windows</h2>
  <div class="card card-purple">
    <p>Meta's default attribution: <strong>7-day click + 1-day view</strong>. This means Meta takes credit for a purchase that happens up to 7 days after an ad click, or 1 day after someone viewed (but didn't click) your ad.</p>
    <h4>When to Change Attribution</h4>
    <ul class="bullet-list">
      <li><strong>High-consideration products:</strong> Keep 7-day click ‚Äî people research before buying</li>
      <li><strong>Impulse purchases:</strong> 1-day click may be sufficient and more accurate</li>
      <li><strong>ROAS comparison:</strong> Set all campaigns to the same attribution window</li>
    </ul>
  </div>

  <h2>Account Structure Best Practices at Scale</h2>
  <div class="card">
    <div class="code-block">Ad Account Structure (Simplified)
‚îÇ
‚îú‚îÄ‚îÄ CAMPAIGN: Prospecting ‚Äî Cold (CBO)
‚îÇ   ‚îú‚îÄ‚îÄ Ad Set: Broad
‚îÇ   ‚îú‚îÄ‚îÄ Ad Set: 1% LAL Purchasers
‚îÇ   ‚îî‚îÄ‚îÄ Ad Set: Interest Stack
‚îÇ
‚îú‚îÄ‚îÄ CAMPAIGN: Retargeting ‚Äî Warm (ABO)
‚îÇ   ‚îú‚îÄ‚îÄ Ad Set: Cart Abandoners 7d
‚îÇ   ‚îú‚îÄ‚îÄ Ad Set: Product Viewers 30d
‚îÇ   ‚îî‚îÄ‚îÄ Ad Set: Email List
‚îÇ
‚îî‚îÄ‚îÄ CAMPAIGN: Advantage+ Shopping (ASC)
    ‚îî‚îÄ‚îÄ (Meta handles everything)</div>
  </div>

  <h2>Third-Party Data & Signals</h2>
  <div class="card card-green">
    <h3>First-Party Data Strategy</h3>
    <p>Post-iOS 14, first-party data is your biggest competitive advantage. Build systems to collect it:</p>
    <ul class="bullet-list">
      <li>Email capture funnels (lead magnets, discount popups)</li>
      <li>SMS lists for retargeting</li>
      <li>Customer purchase history for LTV lookalikes</li>
      <li>Loyalty programs for lifetime value signals</li>
      <li>Regularly upload fresh customer lists to Meta</li>
    </ul>
  </div>
</div>

<!-- ===== TROUBLESHOOTING ===== -->
<div class="page" id="page-troubleshooting">
  <h1>üõ†Ô∏è <span class="highlight">Troubleshooting Center</span></h1>
  <p class="page-subtitle">Diagnose any Meta Ads problem with step-by-step solutions. Click a scenario to expand.</p>

  <div class="info-box">Use this center as your first stop when performance changes. Work through each diagnosis systematically before making changes.</div>

  <div class="diagnosis-card">
    <div class="diagnosis-header" onclick="toggleDiag(this)">
      <div class="diag-icon">üìâ</div>
      <div>
        <div class="diagnosis-title">High CPM + Low CTR</div>
        <div style="font-size:12px; color: var(--text3); margin-top: 3px;">Expensive reach and nobody's clicking</div>
      </div>
    </div>
    <div class="diagnosis-body">
      <h4>Root Cause Analysis</h4>
      <p>High CPM means expensive reach. Low CTR means the creative isn't compelling enough to stop the scroll. Together, you're paying too much to show ads that don't work.</p>
      <h4>Possible Causes</h4>
      <ul class="bullet-list">
        <li>Creative is not relevant to the audience seeing it</li>
        <li>Audience is too small or too competitive (lawyers, financial advisors)</li>
        <li>Ad has a low quality score / relevance ranking</li>
        <li>Seasonal spike in competition (Q4, holidays)</li>
        <li>Ad has negative feedback (hides, reports)</li>
      </ul>
      <h4>Step-by-Step Fix</h4>
      <ol class="step-list">
        <li>Check Audience Size ‚Äî if under 500K, expand it</li>
        <li>Check Ad Relevance diagnostics in column breakdown ‚Äî look for "Below Average" rankings</li>
        <li>Review frequency ‚Äî if over 3, audience is saturated</li>
        <li>Create 3 new creatives with different hooks and visual styles</li>
        <li>Test broad targeting to give algorithm more freedom</li>
        <li>Check if competitors are in high-spend mode (Q4, BFCM)</li>
      </ol>
    </div>
  </div>

  <div class="diagnosis-card">
    <div class="diagnosis-header" onclick="toggleDiag(this)">
      <div class="diag-icon">üñ±Ô∏è</div>
      <div>
        <div class="diagnosis-title">Good CTR but No Conversions</div>
        <div style="font-size:12px; color: var(--text3); margin-top: 3px;">People click but don't buy or sign up</div>
      </div>
    </div>
    <div class="diagnosis-body">
      <h4>Root Cause Analysis</h4>
      <p>This is a <strong>landing page problem</strong>, not an ad problem. The ad is doing its job ‚Äî getting clicks. The breakdown happens after the click.</p>
      <h4>Possible Causes</h4>
      <ul class="bullet-list">
        <li>Message mismatch ‚Äî ad promises something the page doesn't deliver</li>
        <li>Slow page load (over 3 seconds kills conversions)</li>
        <li>Poor mobile experience</li>
        <li>Weak offer or unclear CTA on the page</li>
        <li>Missing trust signals (reviews, guarantees, security badges)</li>
        <li>High price with no justification</li>
        <li>Pixel is broken ‚Äî conversions are happening but not tracking</li>
      </ul>
      <h4>Step-by-Step Fix</h4>
      <ol class="step-list">
        <li>First: Verify your Pixel is firing Purchase/Lead events with Meta Pixel Helper</li>
        <li>Use Google PageSpeed Insights ‚Äî target 90+ on mobile</li>
        <li>Read your ad copy then look at your landing page ‚Äî does it match exactly?</li>
        <li>Add heatmapping tool (Hotjar) to see where people leave</li>
        <li>Add more social proof: reviews, testimonials, "as seen in"</li>
        <li>Make your CTA more specific and benefit-focused</li>
        <li>A/B test your headline on the landing page</li>
      </ol>
    </div>
  </div>

  <div class="diagnosis-card">
    <div class="diagnosis-header" onclick="toggleDiag(this)">
      <div class="diag-icon">üí∏</div>
      <div>
        <div class="diagnosis-title">Good Traffic but Poor ROAS</div>
        <div style="font-size:12px; color: var(--text3); margin-top: 3px;">Traffic coming in but not converting profitably</div>
      </div>
    </div>
    <div class="diagnosis-body">
      <h4>Root Cause Analysis</h4>
      <p>Clicks are coming in and some conversions are happening, but the revenue doesn't justify the spend. Usually an audience mismatch, offer problem, or AOV issue.</p>
      <h4>Possible Causes</h4>
      <ul class="bullet-list">
        <li>Wrong audience ‚Äî they convert but at a low value</li>
        <li>Offer is priced incorrectly for the audience</li>
        <li>Average Order Value (AOV) is too low for your ad spend</li>
        <li>Attribution issue ‚Äî ROAS looks bad but some conversions are untracked</li>
        <li>Product is seasonal and demand has dropped</li>
      </ul>
      <h4>Step-by-Step Fix</h4>
      <ol class="step-list">
        <li>Cross-reference Meta ROAS with actual revenue in Shopify/CRM</li>
        <li>Add UTMs and verify GA4 is showing the true revenue</li>
        <li>Calculate: what ROAS do you NEED to be profitable? Compare to actual.</li>
        <li>Test different audiences ‚Äî lookalikes from high-LTV customers</li>
        <li>Add upsells/order bumps to increase AOV</li>
        <li>Test a bundle offer that increases average transaction value</li>
      </ol>
    </div>
  </div>

  <div class="diagnosis-card">
    <div class="diagnosis-header" onclick="toggleDiag(this)">
      <div class="diag-icon">üîª</div>
      <div>
        <div class="diagnosis-title">Sudden Performance Drop</div>
        <div style="font-size:12px; color: var(--text3); margin-top: 3px;">Campaign was working, then stopped</div>
      </div>
    </div>
    <div class="diagnosis-body">
      <h4>Root Cause Analysis</h4>
      <p>Performance was stable and then dropped. This is almost always one of five things: creative fatigue, audience saturation, platform changes, tracking issue, or external factors.</p>
      <h4>Diagnostic Checklist</h4>
      <ol class="step-list">
        <li>Check <strong>Frequency</strong> ‚Äî above 4? Creative fatigue is likely</li>
        <li>Check <strong>Pixel events</strong> in Events Manager ‚Äî is tracking still firing?</li>
        <li>Check <strong>Landing page</strong> ‚Äî is it still live and loading correctly?</li>
        <li>Check <strong>Ad status</strong> ‚Äî any rejected ads or policy violations?</li>
        <li>Check <strong>Ad Relevance rankings</strong> ‚Äî did quality score drop?</li>
        <li>Check <strong>external factors</strong> ‚Äî competitor promotion? Price change? Stock issue?</li>
      </ol>
      <h4>Fix Based on Diagnosis</h4>
      <ul class="bullet-list">
        <li>Creative fatigue ‚Üí Launch 3+ new creatives immediately</li>
        <li>Tracking issue ‚Üí Fix pixel, check CAPI, verify events</li>
        <li>Policy violation ‚Üí Review rejected ads, resubmit or appeal</li>
        <li>Audience saturation ‚Üí Expand targeting or exclude recent viewers</li>
      </ul>
    </div>
  </div>

  <div class="diagnosis-card">
    <div class="diagnosis-header" onclick="toggleDiag(this)">
      <div class="diag-icon">üò¥</div>
      <div>
        <div class="diagnosis-title">High Frequency / Audience Saturation</div>
        <div style="font-size:12px; color: var(--text3); margin-top: 3px;">Everyone has seen your ad too many times</div>
      </div>
    </div>
    <div class="diagnosis-body">
      <h4>Signs of Saturation</h4>
      <ul class="bullet-list">
        <li>Frequency above 4.0 with declining performance</li>
        <li>CTR dropping week over week</li>
        <li>CPA rising without budget changes</li>
        <li>CPM rising (algorithm can't find new people efficiently)</li>
      </ul>
      <h4>Solutions</h4>
      <ol class="step-list">
        <li>Launch new creative immediately ‚Äî different format, different hook</li>
        <li>Expand audience size ‚Äî broaden interests or increase LAL %</li>
        <li>Pause the ad set for 2‚Äì4 weeks to let the audience "reset"</li>
        <li>Exclude recent viewers (saw ad in last 30 days) via Custom Audience</li>
        <li>Expand geographic targeting if possible</li>
      </ol>
    </div>
  </div>

  <div class="diagnosis-card">
    <div class="diagnosis-header" onclick="toggleDiag(this)">
      <div class="diag-icon">üì±</div>
      <div>
        <div class="diagnosis-title">Campaign Stuck in Learning Phase</div>
        <div style="font-size:12px; color: var(--text3); margin-top: 3px;">Can't exit Learning ‚Äî says "Learning Limited"</div>
      </div>
    </div>
    <div class="diagnosis-body">
      <h4>Why This Happens</h4>
      <p>Not enough optimization events (needs 50/week per ad set) or you keep editing the campaign and resetting the clock.</p>
      <h4>Solutions</h4>
      <ol class="step-list">
        <li>Check how many conversions you're getting per week ‚Äî if under 50, continue to step 2</li>
        <li>Switch to a higher-funnel event: Purchase ‚Üí InitiateCheckout ‚Üí AddToCart ‚Üí ViewContent</li>
        <li>Consolidate ad sets (fewer ad sets = more budget per set = faster learning)</li>
        <li>Stop making edits ‚Äî every change resets the learning phase</li>
        <li>Consider increasing daily budget temporarily to generate more events faster</li>
      </ol>
    </div>
  </div>

  <div class="diagnosis-card">
    <div class="diagnosis-header" onclick="toggleDiag(this)">
      <div class="diag-icon">üö´</div>
      <div>
        <div class="diagnosis-title">Ad Account Disabled</div>
        <div style="font-size:12px; color: var(--text3); margin-top: 3px;">Account or ad rejected ‚Äî how to recover</div>
      </div>
    </div>
    <div class="diagnosis-body">
      <h4>Common Policy Violations</h4>
      <ul class="bullet-list">
        <li>Before/after images (prohibited in health/weight loss)</li>
        <li>Claims that are not substantiated</li>
        <li>Targeting based on sensitive attributes (health, religion, politics)</li>
        <li>Landing page doesn't match ad content</li>
        <li>Too much text in image (old rule ‚Äî less enforced now)</li>
        <li>Restricted categories: alcohol, gambling, financial services, supplements</li>
      </ul>
      <h4>Recovery Steps</h4>
      <ol class="step-list">
        <li>Read the rejection reason in Ads Manager carefully</li>
        <li>Edit the ad to comply with the policy ‚Äî be literal, not creative</li>
        <li>Request review if you believe rejection was a mistake</li>
        <li>If account disabled: Go to Business Support ‚Üí Request Review</li>
        <li>Be patient ‚Äî reviews can take 1‚Äì7 business days</li>
        <li>If rejected again: Rewrite completely, not just minor edits</li>
      </ol>
    </div>
  </div>
</div>

<!-- ===== REAL WORLD SCENARIOS ===== -->
<div class="page" id="page-scenarios">
  <h1>üé¨ <span class="highlight">Real World Scenarios</span></h1>
  <p class="page-subtitle">How to apply everything you've learned in specific business situations.</p>

  <h2>Scenario 1: E-Commerce Store ‚Äî Launching from Scratch</h2>
  <div class="card card-accent">
    <h3>The Situation</h3>
    <p>You have a Shopify store selling $49 skincare products. Zero prior ad history. Pixel installed. $1,000 monthly budget.</p>
    <h3>The Strategy</h3>
    <ol class="step-list">
      <li><strong>Week 1‚Äì2:</strong> ABO testing campaign. 3 ad sets ($20/day each): Interest A, Interest B, Broad. 4 creatives per ad set. Objective: Sales. Event: Purchase.</li>
      <li><strong>Week 3:</strong> Kill 2 worst ad sets. Put remaining $40/day into winner. Launch 2 new creative tests on the winner.</li>
      <li><strong>Week 4:</strong> If profitable (CPA under $25): Start CBO scaling campaign. Budget: $50/day. Feed in 3 winning creatives.</li>
      <li><strong>Month 2:</strong> Build 1% LAL from purchasers. Add retargeting for cart abandoners ($10/day).</li>
    </ol>
    <h3>Key Metrics to Watch</h3>
    <ul class="bullet-list">
      <li>Target CPA: under $20 (leaves $29 margin on $49 product)</li>
      <li>Target ROAS: 2.5x minimum</li>
      <li>Frequency cap: under 3 per week during test</li>
    </ul>
  </div>

  <h2>Scenario 2: Lead Generation ‚Äî Local Service Business</h2>
  <div class="card card-green">
    <h3>The Situation</h3>
    <p>A local plumbing company wants to generate booked appointments. Service area: 30-mile radius. $800/month budget.</p>
    <h3>The Strategy</h3>
    <ol class="step-list">
      <li><strong>Objective:</strong> Leads (using Instant Form for low friction)</li>
      <li><strong>Audience:</strong> Homeowners, 30‚Äì65, within 30-mile radius. Interest: Home Improvement, Home Ownership.</li>
      <li><strong>Creative:</strong> Video testimonial from happy customer. "Emergency plumber in [City]?" hook.</li>
      <li><strong>Lead Form:</strong> 3 fields maximum. Name, Phone, "What's the issue?" dropdown.</li>
      <li><strong>Follow-up system:</strong> Call within 5 minutes of form submission ‚Äî speed to lead is critical.</li>
      <li><strong>Budget allocation:</strong> $600 prospecting, $200 retargeting (visitors who didn't submit form)</li>
    </ol>
    <h3>Key Metrics</h3>
    <ul class="bullet-list">
      <li>Target CPL: under $30 (if you close 1 in 10, job value must be $300+)</li>
      <li>Lead form completion rate: target 20%+</li>
      <li>Response time: under 5 minutes for best close rate</li>
    </ul>
  </div>

  <h2>Scenario 3: SaaS Product ‚Äî Trial Signups</h2>
  <div class="card card-purple">
    <h3>The Situation</h3>
    <p>B2B SaaS tool for project management. $99/month subscription. Target: Small business owners, 5‚Äì50 employees. $3,000/month budget.</p>
    <h3>The Strategy</h3>
    <ol class="step-list">
      <li><strong>Funnel:</strong> Ad ‚Üí Free Trial Signup ‚Üí Onboarding Email Sequence ‚Üí Paid Conversion</li>
      <li><strong>Objective:</strong> Sales (optimizing for trial signup event)</li>
      <li><strong>Audiences:</strong> Job title targeting (Owner, CEO, Founder), business interest stacks, 1% LAL from trial users</li>
      <li><strong>Creative:</strong> Product demo video (show the UI), problem-focused copy, "Try free for 14 days" CTA</li>
      <li><strong>Attribution:</strong> Set to 7-day click (SaaS buying decisions take time)</li>
      <li><strong>Retargeting:</strong> Visited pricing page but didn't convert (strong buying signal)</li>
    </ol>
    <h3>B2B Meta Ads Nuances</h3>
    <ul class="bullet-list">
      <li>B2B audiences are small ‚Äî expect higher CPMs ($50‚Äì$100)</li>
      <li>Consider using LinkedIn for primary B2B prospecting and Meta for retargeting</li>
      <li>Lead to paid conversion window can be 30‚Äì90 days ‚Äî account for this in attribution</li>
    </ul>
  </div>

  <h2>Scenario 4: Scaling to $50K/month Ad Spend</h2>
  <div class="card card-orange">
    <h3>The Challenge</h3>
    <p>You're spending $5K/month profitably. How do you get to $50K without performance collapsing?</p>
    <h3>The Approach</h3>
    <ol class="step-list">
      <li><strong>Build a creative machine:</strong> At scale, you need 20+ new creatives per month minimum. Set up a UGC creator network or in-house production system.</li>
      <li><strong>Diversify audiences:</strong> You need multiple winning audiences ‚Äî don't rely on one ad set. LAL 1%, 2%, 3%, Broad, multiple interest stacks.</li>
      <li><strong>Launch Advantage+ Shopping</strong> alongside manual campaigns and let them compete.</li>
      <li><strong>Implement CAPI</strong> ‚Äî at this spend level, every % of missing tracking costs thousands.</li>
      <li><strong>Build a proper reporting dashboard</strong> (Google Looker Studio connecting Meta and GA4).</li>
      <li><strong>Hire a media buyer</strong> ‚Äî full-time optimization is needed at this level.</li>
    </ol>
  </div>
</div>

<!-- ===== RESOURCES ===== -->
<div class="page" id="page-resources">
  <h1>üìö <span class="highlight">Resources</span></h1>
  <p class="page-subtitle">Official documentation, tools, and further learning.</p>

  <h2>Official Meta Resources</h2>
  <div class="card card-accent">
    <ul class="bullet-list">
      <li><strong>Meta Business Help Center:</strong> business.facebook.com/help</li>
      <li><strong>Meta Blueprint (Free Courses):</strong> facebook.com/business/learn</li>
      <li><strong>Meta Ads Manager:</strong> adsmanager.facebook.com</li>
      <li><strong>Meta Events Manager:</strong> business.facebook.com/events_manager</li>
      <li><strong>Meta Pixel Helper:</strong> Chrome Extension</li>
      <li><strong>Meta Creative Hub:</strong> Preview and create ads</li>
    </ul>
  </div>

  <h2>Tracking & Analytics Tools</h2>
  <div class="card card-green">
    <ul class="bullet-list">
      <li><strong>Google Tag Manager:</strong> tagmanager.google.com</li>
      <li><strong>Google Analytics 4:</strong> analytics.google.com</li>
      <li><strong>Tag Assistant (Chrome):</strong> Verify GTM and GA4</li>
      <li><strong>Google Analytics Debugger (Chrome):</strong> Real-time event testing</li>
      <li><strong>GA4 DebugView:</strong> Built into GA4 interface</li>
    </ul>
  </div>

  <h2>Recommended Third-Party Tools</h2>
  <div class="card card-purple">
    <ul class="bullet-list">
      <li><strong>Hotjar:</strong> Heatmaps and session recordings for CRO</li>
      <li><strong>Google Looker Studio:</strong> Free reporting dashboard connecting Meta + GA4</li>
      <li><strong>Canva:</strong> Quick ad creative production</li>
      <li><strong>CapCut:</strong> Mobile video editing for UGC-style ads</li>
      <li><strong>AdSpy / BigSpy:</strong> Competitor ad research tools</li>
      <li><strong>Triple Whale / Northbeam:</strong> Multi-touch attribution for e-commerce</li>
    </ul>
  </div>

  <h2>Key Formulas Reference</h2>
  <div class="table-wrap">
    <table>
      <thead><tr><th>Metric</th><th>Formula</th></tr></thead>
      <tbody>
        <tr><td>CPM</td><td>(Spend √∑ Impressions) √ó 1,000</td></tr>
        <tr><td>CTR</td><td>(Clicks √∑ Impressions) √ó 100</td></tr>
        <tr><td>CPC</td><td>Spend √∑ Clicks</td></tr>
        <tr><td>CPA</td><td>Spend √∑ Conversions</td></tr>
        <tr><td>ROAS</td><td>Revenue √∑ Spend</td></tr>
        <tr><td>CVR</td><td>(Conversions √∑ Clicks) √ó 100</td></tr>
        <tr><td>Breakeven ROAS</td><td>1 √∑ Gross Margin</td></tr>
        <tr><td>Max CPA</td><td>Revenue per Order √ó Gross Margin %</td></tr>
      </tbody>
    </table>
  </div>
</div>

<!-- ===== ABOUT ===== -->
<div class="page" id="page-about">
  <h1>‚ÑπÔ∏è <span class="highlight">About</span></h1>
  <p class="page-subtitle">About this academy and how to use it effectively.</p>

  <div class="card card-accent">
    <h2 style="border:none; margin-top:0;">Meta Ads Performance Marketing Academy</h2>
    <p>This is a comprehensive, structured learning platform covering everything a performance marketer needs to run successful Meta (Facebook & Instagram) advertising campaigns.</p>
    <p>The content is designed for three levels:</p>
    <ul class="bullet-list">
      <li><strong>Beginners:</strong> Start with "Start Here" and follow the learning path in order</li>
      <li><strong>Intermediate:</strong> Jump into Optimization, Audience Targeting, or Creatives</li>
      <li><strong>Advanced:</strong> Use Advanced Meta Ads, Troubleshooting Center, and Conversion API</li>
    </ul>
  </div>

  <h2>How to Use This Academy</h2>
  <ol class="step-list">
    <li>Use the <strong>sidebar</strong> to navigate between topics</li>
    <li>Use the <strong>search bar</strong> at the top to find specific topics quickly</li>
    <li>Use the <strong>AI Assistant</strong> (bottom right button) to ask quick questions</li>
    <li>Bookmark this page and return as a reference while running campaigns</li>
    <li>Use the Troubleshooting Center as your first stop when performance drops</li>
  </ol>

  <div class="success-box">This academy is updated to reflect Meta Ads best practices as of 2024/2025, including post-iOS 14 tracking, Advantage+ campaigns, and broad targeting strategies.</div>
</div>

</main>

<!-- CHATBOT -->
<button id="chatbot-toggle" onclick="toggleChat()" title="Ask the AI Assistant">ü§ñ</button>

<div id="chatbot">
  <div class="chat-header">
    <div class="chat-header-title">ü§ñ Meta Ads Assistant</div>
    <button class="chat-close" onclick="toggleChat()">‚úï</button>
  </div>
  <div id="chat-messages">
    <div class="chat-msg bot">Hi! I'm your Meta Ads assistant. Ask me anything about campaigns, metrics, tracking, or strategy.</div>
  </div>
  <div class="chat-suggestions">
    <span class="chat-sug" onclick="askQuestion('What is learning phase?')">Learning Phase?</span>
    <span class="chat-sug" onclick="askQuestion('CBO vs ABO')">CBO vs ABO</span>
    <span class="chat-sug" onclick="askQuestion('Why is my CPA high?')">High CPA fix</span>
    <span class="chat-sug" onclick="askQuestion('What is ROAS?')">What is ROAS?</span>
  </div>
  <div class="chat-input-row">
    <input type="text" id="chat-input" placeholder="Ask anything about Meta Ads‚Ä¶" onkeydown="if(event.key==='Enter') sendChat()">
    <button id="chat-send" onclick="sendChat()">‚Üí</button>
  </div>
</div>

<!-- OVERLAY for mobile -->
<div id="sidebar-overlay" onclick="toggleSidebar()" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.5); z-index:850;"></div>

<script>
// ===== NAVIGATION =====
function showPage(id) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  const page = document.getElementById('page-' + id);
  if (page) { page.classList.add('active'); window.scrollTo(0, 0); }
  const nav = document.querySelector('[data-page="' + id + '"]');
  if (nav) nav.classList.add('active');
  // Close sidebar on mobile
  if (window.innerWidth <= 900) {
    document.getElementById('sidebar').classList.remove('open');
    document.getElementById('sidebar-overlay').style.display = 'none';
  }
}

function toggleSidebar() {
  const sb = document.getElementById('sidebar');
  const ov = document.getElementById('sidebar-overlay');
  const isOpen = sb.classList.contains('open');
  sb.classList.toggle('open');
  ov.style.display = isOpen ? 'none' : 'block';
}

// ===== SEARCH =====
const searchIndex = [
  { page: 'basics', title: 'Campaign Structure', text: 'Campaign Ad Set Ad three levels structure hierarchy' },
  { page: 'basics', title: 'Learning Phase', text: 'learning phase 50 conversions optimization events unstable' },
  { page: 'basics', title: 'ABO vs CBO', text: 'ABO CBO campaign budget optimization ad set budget' },
  { page: 'basics', title: 'Ad Auction', text: 'auction bid quality relevance score total value' },
  { page: 'basics', title: 'Placements', text: 'placements feed stories reels messenger audience network' },
  { page: 'campaign', title: 'Campaign Creation', text: 'create campaign step by step UTM naming convention' },
  { page: 'campaign', title: 'Campaign Objectives', text: 'sales leads traffic awareness engagement app installs' },
  { page: 'audience', title: 'Interest Targeting', text: 'interest targeting core audiences demographics behaviors' },
  { page: 'audience', title: 'Lookalike Audiences', text: 'lookalike LAL 1% 2% 3% seed audience purchasers' },
  { page: 'audience', title: 'Broad Targeting', text: 'broad targeting no interest algorithm finds buyers' },
  { page: 'audience', title: 'Custom Audiences', text: 'custom audiences website visitors email list retargeting' },
  { page: 'audience', title: 'Frequency & Fatigue', text: 'frequency fatigue 3.5 saturation audience' },
  { page: 'creatives', title: 'Ad Hooks', text: 'hook first 3 seconds pattern interrupt problem question' },
  { page: 'creatives', title: 'Ad Copy Formula', text: 'AIDA PAS copy formula attention interest desire action' },
  { page: 'creatives', title: 'Video Ad Structure', text: 'video ad hook problem agitation solution proof CTA' },
  { page: 'creatives', title: 'UGC Ads', text: 'UGC user generated content authentic testimonial unboxing' },
  { page: 'creatives', title: 'Creative Testing', text: 'creative testing framework one variable at a time' },
  { page: 'optimization', title: 'CPM', text: 'CPM cost per mille thousand impressions expensive reach' },
  { page: 'optimization', title: 'CTR', text: 'CTR click through rate benchmark 1% creative' },
  { page: 'optimization', title: 'CPA', text: 'CPA cost per acquisition target high CPA fix' },
  { page: 'optimization', title: 'ROAS', text: 'ROAS return on ad spend revenue profit ecommerce' },
  { page: 'optimization', title: 'Conversion Rate', text: 'CVR conversion rate landing page mobile speed' },
  { page: 'scaling', title: 'Vertical Scaling', text: 'budget increase 20 30 percent scaling' },
  { page: 'scaling', title: 'Horizontal Scaling', text: 'duplicate campaign horizontal scaling' },
  { page: 'retargeting', title: 'Retargeting Strategy', text: 'retargeting cart abandoners warm audience funnel' },
  { page: 'retargeting', title: 'Dynamic Product Ads', text: 'DPA dynamic product ads catalog retargeting' },
  { page: 'tracking', title: 'Meta Pixel', text: 'pixel installation events purchase lead standard custom' },
  { page: 'tracking', title: 'Standard Events', text: 'ViewContent AddToCart InitiateCheckout Purchase Lead' },
  { page: 'tracking', title: 'iOS 14 Impact', text: 'iOS 14 ATT tracking restrictions 8 events priority' },
  { page: 'gtm', title: 'GTM Setup', text: 'Google Tag Manager container tags triggers variables setup' },
  { page: 'gtm', title: 'Button Click Tracking', text: 'click tracking GTM trigger click classes button' },
  { page: 'gtm', title: 'Data Layer', text: 'data layer push event ecommerce purchase' },
  { page: 'ga4', title: 'GA4 Setup', text: 'Google Analytics 4 property measurement ID stream' },
  { page: 'ga4', title: 'GA4 vs Meta Numbers', text: 'attribution difference why numbers dont match GA4 Meta' },
  { page: 'capi', title: 'Conversion API', text: 'CAPI server side tracking iOS14 deduplication event ID' },
  { page: 'capi', title: 'CAPI Deduplication', text: 'event deduplication event_id browser pixel server capi' },
  { page: 'advanced', title: 'Advantage+ Shopping', text: 'ASC advantage shopping campaign automated' },
  { page: 'advanced', title: 'Advanced Bidding', text: 'cost cap bid cap minimum ROAS bidding strategy' },
  { page: 'troubleshooting', title: 'High CPM Low CTR', text: 'diagnose fix high CPM low CTR expensive reach' },
  { page: 'troubleshooting', title: 'Good CTR No Conversions', text: 'landing page problem click no convert' },
  { page: 'troubleshooting', title: 'Sudden Performance Drop', text: 'performance drop creative fatigue tracking issue' },
  { page: 'troubleshooting', title: 'Ad Account Disabled', text: 'account disabled rejected policy violation recovery' },
];

function handleSearch(q) {
  const res = document.getElementById('search-results');
  if (!q.trim()) { res.style.display = 'none'; return; }
  const lower = q.toLowerCase();
  const matches = searchIndex.filter(i =>
    i.title.toLowerCase().includes(lower) ||
    i.text.toLowerCase().includes(lower)
  ).slice(0, 6);
  if (!matches.length) { res.style.display = 'none'; return; }
  res.innerHTML = matches.map(m =>
    `<div class="search-result-item" onclick="showPage('${m.page}'); document.getElementById('search-input').value=''; document.getElementById('search-results').style.display='none'">
      <strong>${m.page.toUpperCase()}</strong>${m.title}
    </div>`
  ).join('');
  res.style.display = 'block';
}

// ===== DIAGNOSIS ACCORDION =====
function toggleDiag(header) {
  const body = header.nextElementSibling;
  body.classList.toggle('open');
}

// ===== AI CHATBOT (Claude API) =====

// ‚ö†Ô∏è PASTE YOUR ANTHROPIC API KEY BELOW (between the quotes)
// Get your key at: https://console.anthropic.com
const ANTHROPIC_API_KEY = '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';

// Conversation history (keeps context across messages)
let chatHistory = [];

const SYSTEM_PROMPT = `You are an expert Meta (Facebook & Instagram) Ads performance marketing assistant embedded in the Meta Ads Performance Marketing Academy website.

Your role is to:
- Answer questions about Meta Ads, Facebook Ads, Instagram Ads clearly and accurately
- Help users troubleshoot campaign problems (high CPA, low CTR, poor ROAS, etc.)
- Explain concepts from beginner-friendly to advanced level
- Give practical, actionable advice ‚Äî not generic fluff
- Reference real numbers and benchmarks where appropriate

Topics you cover expertly:
- Campaign structure (Campaign ‚Üí Ad Set ‚Üí Ad)
- All campaign objectives and when to use each
- ABO vs CBO, Daily vs Lifetime budgets
- Learning phase, ad auction, delivery system
- Interest targeting, Lookalike Audiences, broad targeting
- Creative strategy, hooks, ad copy, video structure, UGC
- KPIs: CPM, CTR, CPC, CPA, ROAS, CVR ‚Äî diagnosis and action plans
- Scaling strategies (vertical and horizontal)
- Retargeting, dynamic ads, audience windows
- Meta Pixel, standard events, custom events
- Google Tag Manager (GTM) ‚Äî tags, triggers, variables, data layer
- GA4 setup and why numbers differ from Meta
- Conversion API (CAPI), server-side tracking, iOS 14 impact
- Advanced: Advantage+, Dynamic Creative, bidding strategies
- Troubleshooting: performance drops, creative fatigue, account issues

Style:
- Be concise but complete ‚Äî don't pad answers
- Use bullet points for lists and numbered steps for processes
- Be direct and professional, like a senior media buyer talking to a colleague
- If you don't know something, say so honestly`;

function addMessage(text, type, isTyping = false) {
  const msgs = document.getElementById('chat-messages');
  const div = document.createElement('div');
  div.className = `chat-msg ${type}`;
  if (isTyping) {
    div.id = 'typing-indicator';
    div.innerHTML = '<span class="typing-dots"><span>.</span><span>.</span><span>.</span></span>';
  } else {
    // Render newlines as line breaks
    div.style.whiteSpace = 'pre-wrap';
    div.textContent = text;
  }
  msgs.appendChild(div);
  msgs.scrollTop = msgs.scrollHeight;
  return div;
}

function removeTyping() {
  const t = document.getElementById('typing-indicator');
  if (t) t.remove();
}

async function sendChat() {
  const input = document.getElementById('chat-input');
  const q = input.value.trim();
  if (!q) return;

  // Check if API key is set
  if (!ANTHROPIC_API_KEY || ANTHROPIC_API_KEY === 'YOUR_API_KEY_HERE') {
    addMessage(q, 'user');
    input.value = '';
    addMessage('‚ö†Ô∏è API key not set yet. Please open index.html, find the line that says ANTHROPIC_API_KEY and paste your key from console.anthropic.com. The academy content in the sidebar works fully without the key!', 'bot');
    return;
  }

  addMessage(q, 'user');
  input.value = '';

  // Add user message to history
  chatHistory.push({ role: 'user', content: q });

  // Show typing indicator
  addMessage('', 'bot', true);

  try {
    const response = await fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'x-api-key': ANTHROPIC_API_KEY,
        'anthropic-version': '2023-06-01',
        'anthropic-dangerous-direct-browser-access': 'true'
      },
      body: JSON.stringify({
        model: 'claude-haiku-4-5-20251001',
        max_tokens: 1024,
        system: SYSTEM_PROMPT,
        messages: chatHistory
      })
    });

    removeTyping();

    if (!response.ok) {
      const err = await response.json().catch(() => ({}));
      const msg = err?.error?.message || `API error (${response.status}). Check your API key is valid and has credits.`;
      addMessage('‚ùå ' + msg, 'bot');
      chatHistory.pop(); // remove failed message
      return;
    }

    const data = await response.json();
    const reply = data.content?.[0]?.text || 'Sorry, I could not generate a response. Please try again.';

    // Add assistant reply to history (keeps conversation context)
    chatHistory.push({ role: 'assistant', content: reply });

    // Keep history manageable (last 20 messages)
    if (chatHistory.length > 20) chatHistory = chatHistory.slice(-20);

    addMessage(reply, 'bot');

  } catch (error) {
    removeTyping();
    chatHistory.pop();
    if (error.message.includes('Failed to fetch') || error.message.includes('NetworkError')) {
      addMessage('‚ùå Network error. This can happen if your browser blocks the API request. Try deploying the site to Vercel/Netlify ‚Äî it works perfectly there.', 'bot');
    } else {
      addMessage('‚ùå Error: ' + error.message, 'bot');
    }
  }
}

function askQuestion(q) {
  document.getElementById('chat-input').value = q;
  sendChat();
}

function toggleChat() {
  document.getElementById('chatbot').classList.toggle('open');
}
</script>
</body>
</html>
